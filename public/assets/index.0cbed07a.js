var Ce=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var re=(t,e,r)=>e in t?Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G=(t,e)=>{for(var r in e||(e={}))we.call(e,r)&&re(t,r,e[r]);if(oe)for(var r of oe(e))Ae.call(e,r)&&re(t,r,e[r]);return t};import{a as X,o as d,c as l,b as o,n as h,F as w,r as A,d as p,w as f,v as D,e as $,t as b,f as L,g,h as C,i as E,j as Y,l as xe,k as U,m as S,p as ne,q as v,s as K,U as Be,C as ae,D as ie,u as de,x as le,y as Te,z as $e,A as De,B as Ie,E as Se,G as Me}from"./vendor.d0cabdbb.js";const Ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Ee();const H={loadDefaultPhotos:Pe,getPhotosByKeyword:Le,savePhotosToStorage:Oe,uploadPhoto:Ue},q="photos";async function Pe(){const t=localStorage.getItem(q);let e=t?JSON.parse(t):[];return(!e||!e.length)&&((await X.get("https://api.unsplash.com/photos/random/?count=40&&query=view&&client_id=uFlXoOBB-1QIZ9Qf2FIQEBZjmO6n3HlN6XtOulT3ciA")).data.forEach(a=>e.push(a.urls.regular)),localStorage.setItem(q,JSON.stringify(e))),e}async function Le(t=null){let e=[];return t||(t=nature),(await X.get(`https://api.unsplash.com/photos/random/?count=60&&query=${t}&&client_id=uFlXoOBB-1QIZ9Qf2FIQEBZjmO6n3HlN6XtOulT3ciA`)).data.forEach(a=>e.push(a.urls.regular)),e}function Oe(t){localStorage.setItem(q,JSON.stringify(t))}async function Ue(t){const e="Tablero",a="https://api.cloudinary.com/v1_1/dwu2p9wyb/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset",e);try{return(await X.post(a,n)).data}catch(s){console.error("ERROR!",s)}}var Ge="/assets/create-board-display.ea732269.svg",y=(t,e)=>{const r=t.__vccOpts||t;for(const[a,n]of e)r[a]=n;return r};const Fe={emits:["open-drop","close-drop"],components:{},async created(){let t=await H.loadDefaultPhotos();this.imgs=t.slice(0,4)},data(){return{boardToAdd:{title:"",style:{backgroundColor:"#0079bf"}},imgs:[]}},methods:{async addBoard(){!this.boardToAdd.title||(this.$emit("close-drop"),await this.$store.dispatch({type:"addBoard",boardToAdd:this.boardToAdd}))},closeDropdown(){this.$emit("close-drop")},changeBGC(t){delete this.boardToAdd.style.photo,this.boardToAdd.style.backgroundColor=t},changeBGP(t){delete this.boardToAdd.style.backgroundColor,this.boardToAdd.style.photo=t}},computed:{boards(){return this.$store.getters.boards},submitStatus(){return this.boardToAdd.title?"submit-possible":"submit-unpossible"},coverBG(){return this.boardToAdd.style.photo?`background-image: url(${this.boardToAdd.style.photo})`:`background-color : ${this.boardToAdd.style.backgroundColor}`},cardBGC(){return t=>this.boardToAdd.style.backgroundColor===t},cardBGP(){return t=>this.boardToAdd.style.photo===t}}},Ne={class:"create-board"},ze={class:"modal-header"},He=o("div",{class:"modal-title"},"Create board",-1),Je={class:"modal-content"},je={class:"background-display"},Re=o("img",{class:"cover-img",src:Ge,alt:""},null,-1),Qe=[Re],Ve={class:"background-picker-container"},Xe=o("label",{class:"covers-title",for:"background-picker-title"},"Background",-1),qe={class:"background-options"},Ye={class:"background-imgs-options"},Ke=["onClick"],We={key:0,class:"check-photo-container"},Ze=o("span",{class:"checked-photo"},[o("span",{class:"check-icon"})],-1),et=[Ze],tt={class:"background-colors-options"},st={class:"color-card"},ot={key:0,class:"check-container"},rt=o("span",{class:"checked-color"},[o("span",{class:"check-icon"})],-1),nt=[rt],at={class:"color-card"},it={key:0,class:"check-container"},dt=o("span",{class:"checked-color"},[o("span",{class:"check-icon"})],-1),lt=[dt],ct={class:"color-card"},ut={key:0,class:"check-container"},ht=o("span",{class:"checked-color"},[o("span",{class:"check-icon"})],-1),pt=[ht],mt={class:"color-card"},gt={key:0,class:"check-container"},bt=o("span",{class:"checked-color"},[o("span",{class:"check-icon"})],-1),_t=[bt],kt={class:"color-card"},vt={key:0,class:"check-container"},ft=o("span",{class:"checked-color"},[o("span",{class:"check-icon"})],-1),yt=[ft],Ct={class:"create-board-input-container"},wt=o("div",{class:"input-title"},"Board title",-1);function At(t,e,r,a,n,s){return d(),l("div",Ne,[o("div",{class:$(["create-board-modal",t.toggleCreateBoardModal])},[o("header",ze,[He,o("button",{class:"close-create-modal-btn",onClick:e[0]||(e[0]=(...i)=>s.closeDropdown&&s.closeDropdown(...i))},"X")]),o("div",Je,[o("div",je,[o("div",{class:"img-container",style:h(s.coverBG)},Qe,4)]),o("div",Ve,[Xe,o("div",qe,[o("ul",Ye,[(d(!0),l(w,null,A(n.imgs,i=>(d(),l("li",{class:"background-img",key:i,onClick:c=>s.changeBGP(i)},[o("button",{class:"img",style:h("background-image: url("+i+")")},[s.cardBGP(i)?(d(),l("span",We,et)):p("",!0)],4)],8,Ke))),128))]),o("ul",tt,[o("li",st,[o("button",{onClick:e[1]||(e[1]=i=>s.changeBGC("#0079bf")),class:"color1"},[s.cardBGC("#0079bf")?(d(),l("span",ot,nt)):p("",!0)])]),o("li",at,[o("button",{onClick:e[2]||(e[2]=i=>s.changeBGC("#d29034")),class:"color2"},[s.cardBGC("#d29034")?(d(),l("span",it,lt)):p("",!0)])]),o("li",ct,[o("button",{onClick:e[3]||(e[3]=i=>s.changeBGC("#519839")),class:"color3"},[s.cardBGC("#519839")?(d(),l("span",ut,pt)):p("",!0)])]),o("li",mt,[o("button",{onClick:e[4]||(e[4]=i=>s.changeBGC("#b04632")),class:"color4"},[s.cardBGC("#b04632")?(d(),l("span",gt,_t)):p("",!0)])]),o("li",kt,[o("button",{onClick:e[5]||(e[5]=i=>s.changeBGC("#89609e")),class:"color5"},[s.cardBGC("#89609e")?(d(),l("span",vt,yt)):p("",!0)])])])])]),o("div",Ct,[wt,f(o("input",{type:"text",class:"create-board-input","onUpdate:modelValue":e[6]||(e[6]=i=>n.boardToAdd.title=i)},null,512),[[D,n.boardToAdd.title]])]),o("button",{class:$(["submit-create-btn",s.submitStatus]),onClick:e[7]||(e[7]=(...i)=>s.addBoard&&s.addBoard(...i))},"Create",2)])],2)])}var ce=y(Fe,[["render",At]]);const xt={name:"",components:{},created(){},data(){return{}},methods:{closeDropdown(t){this.$emit("close-drop",t)},async goToBoard(t){await this.$store.dispatch("loadBoards"),this.$store.commit({type:"setCurrBoardId",boardId:t}),this.$router.push("/board/"+t)}},computed:{boards(){return this.$store.getters.boards},cardBG(){return t=>t.photo?`background-image: url(${t.photo})`:`background-color: ${t.backgroundColor}`}}},Bt={class:"recent-drop-content dropdown"},Tt={class:"drop-header"},$t=o("div",{class:"header-text"},"Recent boards",-1),Dt=["onClick"],It={class:"board-text"},St={class:"board-title"},Mt={key:0,class:"no-boards"};function Et(t,e,r,a,n,s){return d(),l("div",Bt,[o("header",Tt,[$t,o("button",{class:"close-header",onClick:e[0]||(e[0]=i=>s.closeDropdown())}," X ")]),(d(!0),l(w,null,A(s.boards,i=>(d(),l("div",{class:"boards-list",key:i._id},[o("a",{class:"board-details",onClick:c=>s.goToBoard(i._id)},[i?(d(),l("div",{key:0,class:"board-cover-container",style:h(s.cardBG(i.style))},null,4)):p("",!0),o("div",It,[o("div",St,b(i.title),1)])],8,Dt)]))),128)),s.boards?p("",!0):(d(),l("p",Mt,"You haven't boards yet. Go ahead and make your first board!"))])}var ue=y(xt,[["render",Et]]);const Pt={name:"",components:{},created(){},data(){return{}},methods:{closeDropdown(t){this.$emit("close-drop",t)},async goToBoard(t){await this.$store.dispatch("loadBoards"),this.$store.commit({type:"setCurrBoardId",boardId:t}),this.$router.push("/board/"+t)}},computed:{starredBoards(){return this.$store.getters.starredBoards||[]},cardBG(){return t=>t.photo?`background-image: url(${t.photo})`:`background-color: ${t.backgroundColor}`}}},Lt={class:"starred-drop-content dropdown"},Ot={class:"drop-header"},Ut=o("div",{class:"header-text"},"Starred boards",-1),Gt=["onClick"],Ft={class:"board-text"},Nt={class:"board-title"},zt={key:0,class:"no-starred-boards"};function Ht(t,e,r,a,n,s){return d(),l("div",Lt,[o("header",Ot,[Ut,o("button",{class:"close-header",onClick:e[0]||(e[0]=i=>s.closeDropdown())}," X ")]),(d(!0),l(w,null,A(s.starredBoards,i=>(d(),l("div",{class:"boards-list",key:i._id},[o("a",{class:"board-details",onClick:c=>s.goToBoard(i._id)},[o("div",{class:"board-cover-container",style:h(s.cardBG(i.style))},null,4),o("div",Ft,[o("div",Nt,b(i.title),1)])],8,Gt)]))),128)),s.starredBoards.length?p("",!0):(d(),l("p",zt,"Star important boards to access\\n them quickly and easily."))])}var he=y(Pt,[["render",Ht]]);const Jt={name:"",emits:["openDrop","open-drop"],components:{},created(){},data(){return{}},methods:{closeDropdown(){this.$emit("close-drop")},openDropdown(t){console.log("heyyy"),this.$emit("open-drop",t)}},computed:{boards(){return this.$store.getters.boards}}},jt={class:"more-drop-content dropdown"},Rt={class:"drop-header"},Qt=o("div",{class:"header-text"},"More",-1),Vt={class:"more-options"},Xt=L("Recent boards "),qt=o("svg",{class:"arrow",width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Yt=[Xt,qt],Kt=L("Starred boards "),Wt=o("svg",{class:"arrow",width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Zt=[Kt,Wt];function es(t,e,r,a,n,s){return d(),l("div",jt,[o("header",Rt,[Qt,o("button",{class:"close-header",onClick:e[0]||(e[0]=i=>s.closeDropdown())}," X ")]),o("div",Vt,[o("div",{class:"option-preview",onClick:e[1]||(e[1]=i=>s.openDropdown("recentBoardsDrop"))},Yt),o("div",{class:"option-preview",onClick:e[2]||(e[2]=i=>s.openDropdown("starredBoardsDrop"))},Zt)])])}var pe=y(Jt,[["render",es]]);const ts={props:{imgURL:String,username:String},data(){return{}},created(){},methods:{},computed:{usernameInitials(){if(!this.username)return;const t=this.username.split(" "),e=t[0][0].toUpperCase(),r=t[t.length-1][0].toUpperCase();return t.length>1?e+r:e}}},ss={class:"avatar"},os={class:"avatar-pic"},rs=["src"],ns={key:1,class:"avatar-name"};function as(t,e,r,a,n,s){return d(),l("section",ss,[o("div",os,[r.imgURL?(d(),l("img",{key:0,class:"avatar-img",src:r.imgURL},null,8,rs)):(d(),l("div",ns,b(s.usernameInitials),1))])])}var J=y(ts,[["render",as]]);const O={makeId:is,lightenDarkenColor:ds};function is(t=5){var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<t;a++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function ds(t,e){var r=!1;t[0]=="#"&&(t=t.slice(1),r=!0);var a=parseInt(t,16),n=(a>>16)+e;n>255?n=255:n<0&&(n=0);var s=(a>>8&255)+e;s>255?s=255:s<0&&(s=0);var i=(a&255)+e;return i>255?i=255:i<0&&(i=0),(r?"#":"")+(i|s<<8|n<<16).toString(16)}const ls={emits:["openDrop","open-drop"],components:{createBoardDrop:ce,recentBoardsDrop:ue,starredBoardsDrop:he,moreDrop:pe,avatarProfile:J},created(){},data(){return{isRecentDropOpen:!1,isStarredDropOpen:!1}},methods:{toggleRecentDrop(){this.isRecentDropOpen=!this.isRecentDropOpen},toggleStarredDrop(){this.isStarredDropOpen=!this.isStarredDropOpen},openDropdown(t){this.$emit("open-drop",t)}},computed:{boards(){return this.$store.getters.boards},toggleCreateBtnBGC(){},isCreateBoardOpen(){},bgc(){return this.$store.getters.boardBgc},boardBgStyle(){if(!!this.bgc)return this.bgc.isLight?"background-color:"+this.bgc.bgc+"; opacity: .9;":"background-color:"+this.bgc.bgc+"; opacity: .9;"},textColor(){if(!!this.bgc)return this.bgc.isLight?"color: #172b4d":"color: white"},iconColor(){return this.bgc?this.bgc.isLight?"src/assets/t-icon.png":"src/assets/t-icon-white.png":"src/assets/t-icon.png"},userName(){var t;return(t=this.$store.getters.loggedinUser)==null?void 0:t.username}}},cs=["src"],us=o("span",{class:"logo-text"},"ablero",-1),hs={class:"left-navbar"},ps={class:"main-header-dropdowns"},ms={class:"more-drop"},gs=o("span",null,"More",-1),bs=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),_s=[gs,bs],ks={class:"recent-drop"},vs=o("span",null,"Recent",-1),fs=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),ys=[vs,fs],Cs={class:"starred-drop"},ws=o("span",null,"Starred",-1),As=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),xs=[ws,As],Bs={class:"create-board"},Ts={class:"create-board-btn-container"},$s=o("div",{class:"seperator"},null,-1),Ds={class:"right-navbar"},Is={class:"board-search"},Ss=o("span",{class:"magnifing-glass",role:"img","aria-label":"SearchIcon"},[o("svg",{width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5C18 12.2269 17.4164 13.8175 16.4356 15.0852L20.3769 19.0953C20.764 19.4892 20.7586 20.1223 20.3647 20.5095C19.9708 20.8966 19.3376 20.8911 18.9505 20.4972L15.0129 16.4909C13.7572 17.4383 12.1942 18 10.5 18ZM16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5Z",fill:"currentColor"})])],-1),Ms=o("div",{class:"right-nav-btn"},[o("span",{class:"little-search",role:"img","aria-label":"SearchIcon"},[o("svg",{class:"magnifying-glass",width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5C18 12.2269 17.4164 13.8175 16.4356 15.0852L20.3769 19.0953C20.764 19.4892 20.7586 20.1223 20.3647 20.5095C19.9708 20.8966 19.3376 20.8911 18.9505 20.4972L15.0129 16.4909C13.7572 17.4383 12.1942 18 10.5 18ZM16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5Z",fill:"currentColor"})])])],-1);function Es(t,e,r,a,n,s){const i=g("router-link"),c=g("avatar-profile");return d(),l("section",{class:"main-header",style:h(s.boardBgStyle)},[C(i,{style:h(s.textColor),class:"main-logo",to:"/board/"},{default:E(()=>[o("img",{src:s.iconColor,class:"logo-icon"},null,8,cs),us]),_:1},8,["style"]),o("div",hs,[o("div",ps,[o("div",ms,[o("button",{style:h(s.textColor),class:"drop-btn more-btn",onClick:e[0]||(e[0]=u=>s.openDropdown("moreDrop"))},_s,4)]),o("div",ks,[o("button",{style:h(s.textColor),class:"drop-btn recent-btn",onClick:e[1]||(e[1]=u=>s.openDropdown("recentBoardsDrop"))},ys,4)]),o("div",Cs,[o("button",{style:h(s.textColor),class:"drop-btn starred-btn",onClick:e[2]||(e[2]=u=>s.openDropdown("starredBoardsDrop"))},xs,4)])]),o("div",Bs,[o("div",Ts,[o("button",{class:$(["create-board-btn drop-btn",s.toggleCreateBtnBGC]),onClick:e[3]||(e[3]=u=>s.openDropdown("createBoardDrop")),style:h(s.textColor)}," Create ",6)]),s.isCreateBoardOpen?(d(),l("div",{key:0,class:$(["create-board-modal",t.toggleCreateBoardModal])},null,2)):p("",!0)]),$s]),o("div",Ds,[o("div",Is,[Ss,o("input",{class:"main-input",style:h(s.textColor),type:"text",placeholder:"Search"},null,4)]),Ms,o("div",{onClick:e[4]||(e[4]=u=>s.openDropdown("acountDrop")),class:"main-header-icon"},[C(c,{class:"member-pic",username:s.userName},null,8,["username"])])])],4)}var Ps=y(ls,[["render",Es]]),me="/assets/headerIcon.808020f6.png";const Ls={name:"",components:{},created(){},data(){return{}},methods:{closeDropdown(t){this.$emit("close-drop",t)},logout(){this.$store.dispatch({type:"logout"}),console.log("loggin out"),this.closeDropdown(),this.$router.push("/")}},computed:{boards(){return this.$store.getters.boards},loggedinUser(){return this.$store.getters.loggedinUser},userName(){var t;return(t=this.$store.getters.loggedinUser)==null?void 0:t.username}}},Os={class:"acount-drop-content"},Us={class:"drop-header"},Gs=o("div",{class:"header-text"},"Account",-1),Fs={class:"options-list"},Ns={class:"list-container"},zs={class:"user-details-container"},Hs=o("div",{class:"user-img"},[o("div",{class:"img-container"},[o("img",{src:me,alt:"",class:"img"})])],-1),Js={class:"user-details"},js={class:"user-name"},Rs={class:"user-email"},Qs=Y('<li class="first-option option"><div class="option-wrapper"><span class="option-text">Profile and visibilty</span></div></li><li class="option"><div class="option-wrapper"><span class="option-text">Activity</span></div></li><li class="option"><div class="option-wrapper"><span class="option-text">Cards</span></div></li><li class="last-option option"><div class="option-wrapper"><span class="option-text">Settings</span></div></li>',4),Vs=o("button",{class:"logout-btn"},[o("span",{class:"logout"},"Log out")],-1),Xs=[Vs];function qs(t,e,r,a,n,s){var i,c;return d(),l("div",Os,[o("header",Us,[Gs,o("button",{class:"close-header",onClick:e[0]||(e[0]=u=>s.closeDropdown())},"X")]),o("div",Fs,[o("ul",Ns,[o("div",zs,[Hs,o("div",Js,[o("div",js,b(((i=s.loggedinUser)==null?void 0:i.username)||"Guest"),1),o("span",Rs,b(((c=s.loggedinUser)==null?void 0:c.email)||"guest"),1)])]),Qs,o("li",{onClick:e[1]||(e[1]=(...u)=>s.logout&&s.logout(...u)),class:"logout-option"},Xs)])])])}var Ys=y(Ls,[["render",qs]]);const Ks="",Q=Ws();window.socketService=Q;Q.setup();function Ws(){var t=null;return{async setup(){t=xe(Ks)},on(r,a){t.on(r,a)},off(r,a=null){!t||(a?t.off(r,a):t.removeAllListeners(r))},emit(r,a){t.emit(r,a)},terminate(){t=null}}}const Zs={components:{createBoardDrop:ce,recentBoardsDrop:ue,starredBoardsDrop:he,mainHeader:Ps,acountDrop:Ys,moreDrop:pe},emits:["openDrop","open-drop"],created(){this.$store.dispatch({type:"getLoggedinUser"})},data(){return{currDropDown:null,isHomePage:!1,overflow:"hidden"}},methods:{openDrop(t){this.currDropDown=t},closeDrop(){this.currDropDown=null}},computed:{bodyOverflow(){return`overflow: ${this.overflow}`},loggedinUser(){return this.$store.getters.loggedinUser}},unmounted(){},watch:{$route(t,e){this.$route.name==="home"||this.$route.name==="login"?this.isHomePage=!0:this.isHomePage=!1,(this.$route.name==="login"||this.$route.name==="home")&&this.loggedinUser&&this.$router.push("/board"),this.$route.name==="home"?this.$refs.appContainer.style=" background: linear-gradient(0deg, #fff, #eae6ff 100%);":this.$refs.appContainer.style=" background: white"},loggedinUser:{async handler(){this.loggedinUser?this.$router.push("/board"):this.$router.push("/")}}}};function eo(t,e,r,a,n,s){const i=g("main-header"),c=g("router-view"),u=U("clickoutside");return d(),l("section",{style:h(s.bodyOverflow),class:"app-container",ref:"appContainer"},[n.isHomePage?p("",!0):(d(),S(i,{key:0,onOpenDrop:s.openDrop},null,8,["onOpenDrop"])),C(c,{onOpenDrop:s.openDrop},null,8,["onOpenDrop"]),n.currDropDown?f((d(),S(ne(n.currDropDown),{key:1,onCloseDrop:s.closeDrop,onOpenDrop:s.openDrop},null,8,["onCloseDrop","onOpenDrop"])),[[u,s.closeDrop]]):p("",!0)],4)}var to=y(Zs,[["render",eo]]),ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALEAAACQAgMAAAA6t2LFAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAAAXK03///9CYWMEAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfmAx4INTUBPl9uAAAAAW9yTlQBz6J3mgAAAS1JREFUWMPt1zEOwjAMBVBnyM6A75MjdAj3vwppSkkbnPR/JCQGeyN6RP+3Xiri8znxYUwyjpdVB0svxnGql1s6G8ebVosbehq8vyRvOti6v2SZ6M+a6fUMsZr7Ex/UVFtDNfOuB8Fj91smwfuaaar7mm2xgJq56UHNaGugZis5Cn68JMk8+LmmCFEzH/VlzZO+XMNjyev3kwQIbpYcBG+XZEC3mufYVzU7bf43CzacVkrHH+pAaeG0/oEO9UUzOlP6wenk2rVr165du3bt2rXr93BaKR0pHSgtnFZKR0qHXS+Ill0nSOtLQ7gErxr8qAubxmKX4FVjsUvwqkEscdXwt2hYNRpbZNVobKm7guOi4dhfaLxkXRVKE1iUiS3KxC6bQmkGy53SN0r7/Gieb1o53RJozQQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDMtMzBUMDg6NTM6NTMrMDA6MDBra6KKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTAzLTMwVDA4OjUzOjUzKzAwOjAwGjYaNgAAAABJRU5ErkJggg==",so="/assets/home.f5b958c8.png";const oo={components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}},ro={class:"home-page"},no={class:"home-header"},ao={class:"homepage-nav"},io=o("img",{src:ge,class:"logo-icon"},null,-1),lo=o("span",{class:"logo-text"},"ablero",-1),co={class:"login-container"},uo=L("Log in"),ho=L("Sign up"),po={class:"home-container"},mo={class:"home-page-content"},go={class:"home-page-content-container"},bo={class:"home-page-left"},_o=o("h1",{class:"header"},"Tablero helps teams move work forward.",-1),ko=o("p",{class:"home-text"}," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique - accomplish it all with Tablero. ",-1),vo={action:"",class:"form-container"},fo={class:"start-btn-container"},yo=L("Try live demo!"),Co=o("div",{class:"home-page-right"},[o("img",{src:so,alt:"",width:"445",height:"575"})],-1);function wo(t,e,r,a,n,s){const i=g("router-link");return d(),l("section",ro,[o("header",no,[o("nav",ao,[C(i,{style:h(t.textColor),class:"main-logo",to:"/board/"},{default:E(()=>[io,lo]),_:1},8,["style"]),o("div",co,[C(i,{class:"login",to:"/login/"},{default:E(()=>[uo]),_:1}),C(i,{class:"logout",to:"/login/"},{default:E(()=>[ho]),_:1})])])]),o("section",po,[o("div",mo,[o("div",go,[o("div",bo,[_o,ko,o("form",vo,[o("div",fo,[C(i,{to:"/board/",class:"start-btn"},{default:E(()=>[yo]),_:1})])])]),Co])])])])}var Ao=y(oo,[["render",wo]]);const xo={props:{boardName:String,boardId:String},components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}},Bo={class:"board-card-title"};function To(t,e,r,a,n,s){const i=g("router-link");return d(),S(i,{class:"board-card",to:"/board/"+r.boardId},{default:E(()=>[o("span",Bo,b(r.boardName),1)]),_:1},8,["to"])}var $o=y(xo,[["render",To]]);const Do={props:{},components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}},Io={class:"homepage-nav"},So=Y('<ul class="nav-options"><li class="list-option"><div class="home-content"><span class="option-icon"><span class="icon-container"><span class="boards-icon"></span></span></span><span class="option-text">Boards</span></div></li><li class="list-option"><div class="option-content"><span class="option-icon"><span class="icon-container"><span class="templates-icon"></span></span></span><span class="option-text">Templates</span></div></li><li class="list-option"><div class="option-content"><span class="option-icon"><span class="icon-container"><span class="home-icon"></span></span></span><span class="option-text">Home</span></div></li></ul>',1),Mo=[So];function Eo(t,e,r,a,n,s){return d(),l("section",Io,Mo)}var Po=y(Do,[["render",Eo]]);const Lo="/api/";var Oo=X.create({withCredentials:!0});const P={get(t,e){return V(t,"GET",e)},post(t,e){return V(t,"POST",e)},put(t,e){return V(t,"PUT",e)},delete(t,e){return V(t,"DELETE",e)}};async function V(t,e="GET",r=null){try{return(await Oo({url:`${Lo}${t}`,method:e,data:r,params:e==="GET"?r:null})).data}catch(a){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,r),console.dir(a),a.response&&a.response.status===401&&ye.push("/login"),a}}const x={query:Uo,getBoardById:z,addBoard:Go,updateBoard:N,removeBoard:zo,saveGroup:Ho,removeGroup:Jo,getGroupIdByTaskId:be,saveTask:jo,getTask:Ro,removeTask:Qo,addMembersToBoard:Fo,removeUserFromBoard:No,AddNewUserBoard:qo},j="board";async function Uo(){try{const t=await F.getLoggedinUser();return await P.get(j,t)}catch(t){throw t}}async function z(t){try{return P.get(j+"/"+t)}catch(e){throw e}}async function Go(t,e){var r=await F.getLoggedinUser();const a=Vo();r?(a.members.push(r),a.createdBy=r):(a.createdBy={username:"Admin",email:"Admin@gmail.com",imgUrl:"https://icon-library.com/images/member-icon/member-icon-19.jpg"},a.members.push({_id:"u123",username:"Guest",imgUrl:"https://icon-library.com/images/member-icon/member-icon-19.jpg"})),a.createdAt=Date.now(),a.title=t,a.style=e||{};try{return await P.post(j,a)}catch(n){throw n}}async function N(t){try{const e=await P.put(j+"/"+t._id,t);return Q.emit("board-updated"),e}catch(e){throw e}}async function Fo(t,e){try{const r=await z(e);return t.forEach(a=>{r.members.some(n=>n._id===a._id)||r.members.push(a)}),await N(r)}catch(r){throw r}}async function No(t,e){try{const r=await z(e),a=r.members.findIndex(n=>n._id===t);return r.members.splice(a,1),await N(r)}catch(r){throw r}}async function zo(t){try{return await P.remove(j+"/"+t)}catch(e){throw e}}async function Ho(t,e){try{const r=await z(t);if(e._id){const a=r.groups.findIndex(n=>n._id===e._id);return r.groups[a]=e,await N(r),e}else{const a={_id:O.makeId(),title:e.title,tasks:[]};return r.groups.push(a),await N(r),a}}catch(r){throw r}}async function Jo(t,e){try{const r=await z(t),a=r.groups.findIndex(n=>n._id===e);return r.groups.splice(a,1),await N(r)}catch(r){throw r}}async function jo(t,e){try{const r=await z(e);if(t._id){const a=await be(t._id,e),n=r.groups.find(i=>i._id===a),s=n.tasks.findIndex(i=>i._id===t._id);return n.tasks[s]=t,await N(r),t}else{const a=r.groups.find(s=>s._id===t.groupId),n=Xo(t.title);return a.tasks.push(n),await N(r),n}}catch(r){throw r}}async function Ro(t,e){const r=await z(e);try{const a=r.groups.find(s=>{if(s.tasks.find(c=>c._id===t))return!0});return a?a.tasks.find(s=>s._id===t):void 0}catch(a){throw a}}async function Qo(t,e){try{const r=await z(e),a=r.groups.find(s=>{if(s.tasks.find(c=>c._id===t))return!0});if(!a)return;const n=a.tasks.findIndex(s=>s._id===t);return a.tasks.splice(n,1),await N(r)}catch(r){throw r}}async function be(t,e){try{return(await z(e)).groups.find(n=>{if(n.tasks.find(i=>i._id===t))return!0})._id}catch(r){throw r}}function Vo(){return{isStarred:!1,groups:[],style:{},members:[],activities:[],labels:[{_id:O.makeId(),title:"",color:"#61BD4F"},{_id:O.makeId(),title:"",color:"#F2D600"},{_id:O.makeId(),title:"",color:"#FF9F1A"},{_id:O.makeId(),title:"",color:"#EB5A46"},{_id:O.makeId(),title:"",color:"#C377E0"},{_id:O.makeId(),title:"",color:"#0079BF"}]}}function Xo(t){return{title:t,description:"",_id:O.makeId(),createdAt:Date.now(),labelIds:[],style:{color:"",isBackground:!1}}}async function qo(){try{const t=await F.getLoggedinUser(),e={isStarred:!0,groups:[{_id:"bqIL3",title:"We are tablero",tasks:[{title:"Press here to see the description!",description:`Hello!
We are Tablero, our site is based on the famous website Trello, and actually is a finish project for a web development course called Coding Academy,
Hope you will like our website!`,_id:"ceJ6s",createdAt:1648802285434,labelIds:["B8K9o"],style:{color:"",isBackground:!1}},{title:"About us: Ben",description:`Hey, my name is Ben, I am one of the three developers of Tablero.
I am currently 25 years old, born in Israel, and currently learning how to be a web developer!`,_id:"KQWzA",createdAt:1648802466487,labelIds:[],style:{isBackground:!0,photo:"https://images.unsplash.com/photo-1418065460487-3e41a6c84dc5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDI3NDk&ixlib=rb-1.2.1&q=80&w=1080"}},{title:"About us: Tomer",description:`Hey, my name is Tomer, I am one of the three developers of Tablero.
I am currently 25 years old, born in Israel, and currently learning how to be a web developer!`,_id:"MXIbQ",createdAt:1648802630036,labelIds:[],style:{isBackground:!0,photo:"https://images.unsplash.com/photo-1569337042150-c21c85b80a10?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDI3ODQ&ixlib=rb-1.2.1&q=80&w=1080"}},{title:"About us: Tal",description:`Hey, my name is Tal, I am one of the three developers of Tablero.
I am currently 23 years old, born in Israel, and currently learning how to be a web developer!`,_id:"tKbdt",createdAt:1648802659198,labelIds:[],style:{isBackground:!0,photo:"https://images.unsplash.com/photo-1554730501-8dd4db2b18cc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDI4MzQ&ixlib=rb-1.2.1&q=80&w=1080"}}]},{_id:"Vz34z",title:"What can you do?",tasks:[{title:"You can add lists of assigments!",description:"You can add lists of assigment and project, you can make them about a big project or even make each list resemble a day",_id:"X5NDr",createdAt:1648802883509,labelIds:["J5cwX"],style:{color:"",isBackground:!1}},{title:"You can add tasks to each list!",description:"You can add to every list how many tasks you would like to have, you can have a task which is simple or complicated and use inside options to manage the tasks(due dates, label, checklists, etc..)",_id:"hnZg7",createdAt:1648802977504,labelIds:["AKWkC"],style:{color:"",isBackground:!1}},{title:"You can manage your tasks!",description:`- Add description to the task.
- Add members to each task(only those who are members in your board).
- Add labels to filter importance / subject or what ever you see fit.
- Add checklist to more complicated tasks that involve more actions to complete.
- Add due dates to your tasks to let your colleagues/employees know until when to finish the task.
- Add attachments of images or cover to add a more descriptive information about the task.
- Archive a task if it's done , created by accident etc..`,_id:"3IcE5",createdAt:1648803150039,labelIds:["60snY"],style:{color:"",isBackground:!1}},{title:"Drag to your tasks / lists",description:"You can drag your lists to organize them by order , and even drag tasks between lists.",_id:"CMDwe",createdAt:1648803490618,labelIds:["GQaOp"],style:{color:"",isBackground:!1}},{title:"Invite members to you board",description:`You can invite members to your board. Your members can be your employees, friend or family, after they are signed up to our app!
Whoever you will add will be able to see and update tasks, add lists and this way you will get your project very efficient!`,_id:"IHgIH",createdAt:1648803628093,labelIds:["j5zAD"],style:{color:"",isBackground:!1},memberIds:[]},{title:"Quickly edit tasks",description:"By hovering over a task with your cursor you can press the edit icon and quickly edit your tasks.",_id:"hmMrj",createdAt:1648803851266,labelIds:["X86Hk"],style:{color:"",isBackground:!1}},{title:"Change covers",description:"You can change covers to your board, to help you separate boards.",_id:"8bnhH",createdAt:1648804443303,labelIds:["idxKC"],style:{color:"",isBackground:!1}}]},{_id:"bLROG",title:"What is the purpose of our app?",tasks:[{title:"Project managment",description:"Let's say you have a big or even a small project to do, you have a lot of work to be done, but you don't have a place to write down your tasks, or how to organize all the job you have to do, you can simply make yourself a personal/shared board and start writing what needs to be done, by what order, add a due date and a lot more options!",_id:"xIx9i",createdAt:1648803913661,labelIds:[],style:{isBackground:!1,photo:"https://images.unsplash.com/photo-1517048676732-d65bc937f952?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDQxNTc&ixlib=rb-1.2.1&q=80&w=1080"}},{title:"Manage your business to maximum efficiency",description:`Let's say you have a business with a few or many employees, a lot of work to assign, a lot of tasks that needs to be done.
You can simply make a new board, and start making lists of tasks by category/day or however you like and start assigning members to each task and they can edit the task to let you know if it's complete or start working on the next step of the task.`,_id:"KxFWy",createdAt:1648803969350,labelIds:[],style:{isBackground:!1,photo:"https://images.unsplash.com/photo-1573496130488-f3bd89d03653?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDQzOTA&ixlib=rb-1.2.1&q=80&w=1080"}},{title:"Plan a vacation",description:`So you have a vacation ahead of you, how fun!
As you know vacation planning can be difficult and overwhelming, alot of stuff to buy, plan.
You can make yourself a vacation board, make lists of what you need to buy, where you want to go on your destination, and all you want to do!`,_id:"ZDZtM",createdAt:1648803974843,labelIds:[],style:{isBackground:!1,photo:"https://images.unsplash.com/photo-1611043714658-af3e56bc5299?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDQ0MTU&ixlib=rb-1.2.1&q=80&w=1080"}},{title:"Help you organize your household tasks",description:`If you are the manager of your household you already know how difficult it is to be organized with all the tasks, cleaning, buying groceries, cooking, etc...
We try and make it a simple as possible for you to manage all of these to make you life as simple as possible`,_id:"aw9cw",createdAt:1648804012606,labelIds:[],style:{isBackground:!1,photo:"https://images.unsplash.com/photo-1631889992085-85e6adc159fe?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg4MDQ2ODQ&ixlib=rb-1.2.1&q=80&w=1080"}}]}],style:{photo:"https://images.unsplash.com/photo-1517480625158-292a09aee755?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwzMTM3MDJ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDg3NTMyODY&ixlib=rb-1.2.1&q=80&w=1080"},members:[t],activities:[],labels:[{title:"Members",color:"#61BD4F",_id:"j5zAD"},{title:"Hello",color:"#61BD4F",_id:"B8K9o"},{_id:"2Ur26",title:"",color:"#61BD4F"},{title:"Lists",color:"#F2D600",_id:"J5cwX"},{_id:"OXILN",title:"",color:"#F2D600"},{title:"Tasks",color:"#FF9F1A",_id:"AKWkC"},{_id:"lxDUG",title:"",color:"#FF9F1A"},{title:"Drag",color:"#EB5A46",_id:"GQaOp"},{_id:"3UbCS",title:"",color:"#EB5A46"},{title:"Options",color:"#C377E0",_id:"60snY"},{_id:"yjYE1",title:"",color:"#C377E0"},{title:"Quick edit",color:"#0079BF",_id:"X86Hk"},{title:"Separation",color:"#00c2e0",_id:"idxKC"},{_id:"utucS",title:"",color:"#0079BF"}],createdBy:t,createdAt:Date.now(),title:"Get to know us"};return await P.post(j,e)}catch(t){throw t}}const F={login:er,logout:sr,signup:tr,getLoggedinUser:or,getUsers:Yo,getById:Ko,remove:Wo,update:Zo};window.userService=F;async function Yo(t){return P.get("user",t)}async function Ko(t){const e=await P.get(`user/${t}`);return gWatchedUser=e,e}function Wo(t){return P.delete(`user/${t}`)}async function Zo(t){return t=await P.put(`user/${t._id}`,t),t}async function er(t){return await P.post("auth/login",t)}async function tr(t){const e=await P.post("auth/signup",t);return x.AddNewUserBoard(),e}async function sr(){return await P.post("auth/logout")}async function or(){try{var t=await P.get("auth/loggedinUser");return t}catch(e){throw e}}const rr={emits:["openDrop","open-drop"],components:{boardPreview:$o,hompageNav:Po},created(){this.$store.dispatch({type:"getLoggedinUser"}),this.$store.dispatch({type:"loadBoards"}),this.$store.commit({type:"setCurrBoardId",boardId:null}),this.$store.commit({type:"changeHeaderBgc",bgc:"#026aa7"})},data(){return{}},methods:{openDropdown(t){this.$emit("open-drop",t)},async starBoard(t){await this.$store.dispatch({type:"starBoard",boardId:t})}},computed:{boards(){return this.$store.getters.boards||[]},starredBoards(){return this.$store.getters.starredBoards||[]},cardBG(){return t=>t.photo?`background-image: url(${t.photo})`:t.backgroundColor?`background-color: ${t.backgroundColor}`:"background-color: #0079bf"},loggedinUser(){return this.$store.getters.loggedinUser}},unmounted(){},watch:{loggedinUser:{handler(){this.$store.dispatch({type:"loadBoards"})}}}},nr={class:"boards-page"},ar={class:"all-boards"},ir={key:0,class:"starred-boards-container"},dr=o("div",{class:"starred-boards-title"},[o("span",{class:"member-icon"}),o("h3",{class:"starred-header"},"Starred boards")],-1),lr={class:"starred-boards-list-container"},cr={class:"starred-boards-list"},ur=o("span",{class:"link-block"},null,-1),hr={class:"board-card-details"},pr={class:"card-header-name"},mr={class:"card-star"},gr=["onClick"],br=o("span",{class:"star"},null,-1),_r=[br],kr={key:1,class:"your-boards-container"},vr=o("div",{class:"your-boards-title"},[o("div",{class:"member-icon"}),o("h3",{class:"your-boards-header"},"Your boards")],-1),fr={class:"your-boards-list-container"},yr={class:"your-boards-list"},Cr=o("span",{class:"link-block"},null,-1),wr={class:"board-card-details"},Ar={class:"card-header-name"},xr={class:"card-star"},Br=["onClick"],Tr=o("span",{class:"star"},null,-1),$r=[Tr],Dr=o("div",{class:"new-board-card"},[o("p",null,[o("span",null,"Create new board")])],-1),Ir=[Dr];function Sr(t,e,r,a,n,s){const i=g("hompage-nav"),c=g("router-link");return d(),l("section",nr,[C(i),o("div",ar,[s.starredBoards.length?(d(),l("div",ir,[dr,o("div",lr,[o("ul",cr,[(d(!0),l(w,null,A(s.starredBoards,u=>(d(),l("li",{class:"board-card",key:u._id},[C(c,{class:"board-link",to:"/board/"+u._id,style:h(s.cardBG(u.style))},{default:E(()=>[ur,o("div",hr,[o("div",pr,b(u.title),1),o("div",mr,[o("span",{onClick:v(_=>s.starBoard(u._id),["prevent"]),class:"card-star-container"},_r,8,gr)])])]),_:2},1032,["to","style"])]))),128))])])])):p("",!0),s.boards.length?(d(),l("div",kr,[vr,o("div",fr,[o("ul",yr,[(d(!0),l(w,null,A(s.boards,u=>(d(),l("li",{class:"board-card",key:u._id},[C(c,{class:"board-link",to:"/board/"+u._id,style:h(s.cardBG(u.style))},{default:E(()=>[Cr,o("div",wr,[o("div",Ar,b(u.title),1),o("div",xr,[o("span",{onClick:v(_=>s.starBoard(u._id),["prevent"]),class:"card-star-container"},$r,8,Br)])])]),_:2},1032,["to","style"])]))),128)),o("li",{class:"create-new-board-card",onClick:e[0]||(e[0]=u=>s.openDropdown("createBoardDrop"))},Ir)])])])):p("",!0)])])}var Mr=y(rr,[["render",Sr]]);const Er={props:{},components:{avatarProfile:J},created(){},data(){return{isEditTitle:!1,openMemberDetails:null}},methods:{toggleEditTitle(){this.isEditTitle=!this.isEditTitle,this.isEditTitle&&setTimeout(()=>{this.$refs.titleEdit.focus()},100)},saveBoardTitle(){this.$emit("board-title-changed",JSON.parse(JSON.stringify(this.board)))},stopEdit(){this.isEditTitle=!this.isEditTitle},openMenu(){this.$emit("open-menu")},async starBoard(){await this.$store.dispatch({type:"starBoard",boardId:this.board._id})},openInviteMembers(){const t=this.$refs.inviteMembersBtn.getBoundingClientRect().top,r={x:this.$refs.inviteMembersBtn.getBoundingClientRect().right,y:t};this.$emit("open-invite",r)},closeMemberDetails(){this.openMemberDetails=null},async removeMember(t){this.loggedinUser._id!==this.board.createdBy._id||this.board.createdBy._id===t||!this.loggedinUser||await this.$store.dispatch({type:"removeUserFromBoard",memberId:t,boardId:this.board._id})}},computed:{board(){return this.$store.getters.currBoard},bgc(){return this.$store.getters.boardBgc},textColor(){if(!!this.bgc)return this.bgc.isLight?"color: #172b4d":"color: white"},btnBgc(){if(!!this.bgc)return this.bgc.isLight?"background-color: #0000001a":"background-color: #ffffff3d"},bgDarkness(){return this.board.style.backgroundColor?"":"background: #0000003d;"},isStarred(){return this.board.isStarred?"starred":"not-starred"},loggedinUser(){return this.$store.getters.loggedinUser}}},Pr={class:"board-header-nav"},Lr={class:"board-header-left"},Or={class:"board-header-btn board-name"},Ur={class:"title"},Gr={key:0,class:"member-details"},Fr={class:"member-details-header"},Nr={class:"member-details-body"},zr=o("hr",null,null,-1),Hr=["onClick"],Jr=o("span",null,"Remove from board...",-1),jr=[Jr],Rr=["disabled","title"],Qr=o("button",null,[o("span",{class:"invite-icon"}),o("span",null,"Invite")],-1),Vr=[Qr],Xr={class:"board-header-right"},qr=o("span",{class:"menu-icon"},null,-1),Yr=o("span",null,"Show menu",-1),Kr=[qr,Yr];function Wr(t,e,r,a,n,s){const i=g("avatar-profile"),c=U("clickoutside");return d(),l("section",{class:"board-header",style:h(s.bgDarkness)},[o("nav",Pr,[o("div",Lr,[o("div",Or,[o("div",Ur,[n.isEditTitle?f((d(),l("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>s.board.title=u),ref:"titleEdit",onInput:e[2]||(e[2]=(...u)=>s.saveBoardTitle&&s.saveBoardTitle(...u)),onKeyup:e[3]||(e[3]=K((...u)=>s.toggleEditTitle&&s.toggleEditTitle(...u),["enter"])),style:h("width:"+s.board.title.length*1*10+"px")},null,36)),[[D,s.board.title],[c,s.stopEdit]]):(d(),l("h1",{key:0,onClick:e[0]||(e[0]=(...u)=>s.toggleEditTitle&&s.toggleEditTitle(...u)),style:h(s.textColor)},b(s.board.title),5))])]),o("div",{class:"board-header-btn board-starred",style:h(s.btnBgc)},[o("a",{onClick:e[4]||(e[4]=v((...u)=>s.starBoard&&s.starBoard(...u),["prevent"])),style:h(s.textColor),class:"star-board"},[o("span",{class:$(s.isStarred)},null,2)],4)],4),o("div",{class:"board-members",style:h("width: "+s.board.members.length*21+"px")},[(d(!0),l(w,null,A(s.board.members,(u,_)=>(d(),l("span",{href:"",style:h("left:"+_*21+"px;")},[C(i,{username:u.username,onClick:m=>n.openMemberDetails=u._id,title:u.email},null,8,["username","onClick","title"]),n.openMemberDetails===u._id?f((d(),l("div",Gr,[o("div",Fr,[C(i,{username:u.username,title:u.email},null,8,["username","title"]),o("span",null,b(u.username),1)]),o("div",Nr,[zr,o("button",{onClick:m=>s.removeMember(u._id)},jr,8,Hr)])])),[[c,s.closeMemberDetails]]):p("",!0)],4))),256))],4),o("button",{class:"invite-btn",ref:"inviteMembersBtn",onClick:e[5]||(e[5]=(...u)=>s.openInviteMembers&&s.openInviteMembers(...u)),disabled:!s.loggedinUser,title:s.loggedinUser?"Invite members to your board":"Login to add members"},Vr,8,Rr)]),o("div",Xr,[o("div",{class:"board-header-btn board-menu",style:h(s.btnBgc)},[o("button",{onClick:e[6]||(e[6]=(...u)=>s.openMenu&&s.openMenu(...u)),class:"menu-btn",style:h(s.textColor)},Kr,4)],4)])])],4)}var Zr=y(Er,[["render",Wr]]);const en={props:{label:String},components:{},created(){},data(){return{}},methods:{getLabel(t){return this.label?this.$store.getters.currBoard.labels.find(a=>a._id===t):void 0},showTitle(){this.$store.dispatch({type:"toggleLabelTitle"})}},computed:{isTitleShown(){return this.$store.getters.isLabelTitleShown},isStartAnimation(){return this.$store.getters.isStartAnimation},labelStyle(){const t=this.getLabel(this.label),e=this.isStartAnimation?"fit-content":"40px";return`background-color: ${t==null?void 0:t.color};height: ${this.labelSize.height}; width: ${this.labelSize.width}; min-width: ${e}`},labelTitle(){const t=this.getLabel(this.label);return t==null?void 0:t.title},isLabelOpen(){return this.isTitleShown?"label-open":"label-closing"},textAnimationBehavior(){return this.isStartAnimation?"opacity: 1; position: relative":"opacity: 0; position: absolute"},labelSize(){return this.$store.getters.labelSize}},unmounted(){}};function tn(t,e,r,a,n,s){return d(),l("span",{onClick:e[0]||(e[0]=v((...i)=>s.showTitle&&s.showTitle(...i),["prevent"])),class:$(["label",s.isLabelOpen]),style:h(s.labelStyle)},[o("span",{class:"label-text",style:h(s.textAnimationBehavior)},b(s.labelTitle),5)],6)}var sn=y(en,[["render",tn]]);const on={props:{task:Object},components:{avatarProfile:J},created(){},data(){return{}},methods:{toggleDateDone(){this.task.dueDate.isComplete=!this.task.dueDate.isComplete;const t=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.task)),boardId:t})}},computed:{board(){return this.$store.getters.currBoard},date(){const t=new Date(this.task.dueDate.dueDate),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getDate(),n=t.getFullYear(),i=new Date(Date.now()).getFullYear();return n!==i?`${r} ${a}, ${n}`:`${r} ${a}`},commentCount(){return this.task.comments.length},attachmentsCount(){var t;return(t=this.task.attachments)==null?void 0:t.count},checklistDisplay(){var t=0,e=0;return this.task.checklists.forEach(r=>{r.todos.forEach(a=>{t++,a.isDone&&e++})}),`${e}/${t}`},checklistBg(){var t=0,e=0;return this.task.checklists.forEach(r=>{r.todos.forEach(a=>{t++,a.isDone&&e++})}),e===t?"background-color: #61bd4f; color:white":""},dateBadgeBg(){if(this.task.dueDate.isComplete)return"background-color: #61bd4f; color: #fff";const t=new Date(Date.now()).getDate(),e=new Date(this.task.dueDate).getDate();if(!(this.task.dueDate-Date.now()>864e5)&&e-t===1)return"background-color: #f2d600; color: #fff;"},boardMembers(){return this.$store.getters.boardMembers},taskMembers(){const t=[];return this.task.memberIds.forEach(e=>{this.boardMembers.forEach(r=>{r._id===e&&t.push(r)})}),t}},unmounted(){}},rn={key:0},nn={class:"badges"},an={key:0,class:"watch"},dn=o("span",{class:"watch-icon badge-icon"},null,-1),ln=[dn],cn={key:0,class:"date-complete-icon badge-icon"},un={key:1,class:"date-incomplete-icon badge-icon"},hn={class:"badge-text"},pn={key:2,class:"description"},mn=o("span",{class:"description-icon badge-icon"},null,-1),gn=[mn],bn={key:3,class:"comments"},_n=o("span",{class:"comments-icon badge-icon"},null,-1),kn={class:"badge-text"},vn={key:4,class:"attachments"},fn=o("span",{class:"attachments-icon badge-icon"},null,-1),yn={class:"badge-text"},Cn=o("span",{class:"checklist-icon badge-icon"},null,-1),wn={class:"badge-text"},An={key:0,class:"task-members"};function xn(t,e,r,a,n,s){var c,u,_,m,I,B,M;const i=g("avatar-profile");return(((c=r.task.memberIds)==null?void 0:c.length)||r.task.dueDate||((u=r.task.attachments)==null?void 0:u.length)||((_=r.task.checklists)==null?void 0:_.length))&&!r.task.style.isBackground||r.task.description?(d(),l("section",rn,[o("div",nn,[r.task.watching?(d(),l("div",an,ln)):p("",!0),(m=r.task.dueDate)!=null&&m.dueDate?(d(),l("div",{key:1,onClick:e[0]||(e[0]=v((...T)=>s.toggleDateDone&&s.toggleDateDone(...T),["prevent"])),class:"date",style:h(s.dateBadgeBg)},[this.task.dueDate.isComplete?(d(),l("span",cn)):(d(),l("span",un)),o("span",hn,b(s.date),1)],4)):p("",!0),r.task.description?(d(),l("div",pn,gn)):p("",!0),r.task.comments?(d(),l("div",bn,[_n,o("span",kn,b(s.commentCount),1)])):p("",!0),(I=r.task.attachments)!=null&&I.length?(d(),l("div",vn,[fn,o("span",yn,b(s.attachmentsCount),1)])):p("",!0),(B=r.task.checklists)!=null&&B.length?(d(),l("div",{key:5,class:"checklist",style:h(s.checklistBg)},[Cn,o("span",wn,b(s.checklistDisplay),1)],4)):p("",!0)]),(M=r.task.memberIds)!=null&&M.length?(d(),l("div",An,[(d(!0),l(w,null,A(s.taskMembers,T=>(d(),l("div",{class:"member-img",key:T},[C(i,{username:T.username,class:"member-img",title:T.username},null,8,["username","title"])]))),128))])):p("",!0)])):p("",!0)}var Bn=y(on,[["render",xn]]);const Tn={props:{labels:Array,task:Object},data(){return{labelToAdd:{title:"",color:"#61BD4F"},labelColors:["#61BD4F","#F2D600","#FF9F1A","#EB5A46","#C377E0","#0079BF","#00c2e0","#51e898","#ff78cb","#344563","#b3bac5"],isAdding:!1}},created(){this.task.labelIds||(this.task.labelIds=[])},methods:{toggleIsAdding(){this.isAdding=!0},closeAction(t){this.$emit("close-action",t)},toggleLabel(t){if(this.labelIds.includes(t)){const e=this.labelIds.findIndex(r=>r===t);this.labelIds.splice(e,1)}else this.labelIds.push(t);this.$emit("label-set",this.labelIds)},setLabelColor(t){this.labelToAdd.color=t},onAddLabel(){!this.labelToAdd.title||(this.$emit("label-add",G({},this.labelToAdd)),this.isAdding=!1,this.labelToAdd={title:"",color:""})},editLabel(t){this.labelToAdd=G({},t),this.isAdding=!0},onDeleteLabel(){this.$emit("label-delete",this.labelToAdd._id),this.isAdding=!1,this.labelToAdd={title:"",color:""}}},computed:{labelIds(){return this.task.labelIds},labelShadowColor(){return t=>{switch(t=t.toUpperCase(),t){case"#61BD4F":return"#529739";case"#F2D600":return"#D9B41C";case"#FF9F1A":return"#CD8313";case"#EB5A46":return"#AF4632";case"#C377E0":return"#89609E";case"#0079BF":return"#055A8C";case"#00C2E0":return"#0098B7";case"#51E898":return"#4BBF6B";case"#FF78CB":return"#C9558F";case"#344563":return"#091E42";case"#B3BAC5":return"#97a0af"}}}},components:{}},$n={class:"label-menu"},Dn={key:0,class:"label-main"},In={class:"label-menu-header"},Sn=o("h3",{class:"menu-title"},"Labels",-1),Mn=o("hr",null,null,-1),En={class:"main"},Pn=o("input",{type:"text",placeholder:"Search labels..."},null,-1),Ln=o("h4",null,"Labels",-1),On=["onClick"],Un={class:"label-title"},Gn={key:0,class:"check-icon"},Fn=["onClick"],Nn={key:1,class:"label-add"},zn={class:"header"},Hn=o("h3",{class:"menu-title"},"Create Label",-1),Jn=o("hr",null,null,-1),jn={class:"main"},Rn=o("h4",null,"Name",-1),Qn=o("h4",null,"Select a color",-1),Vn={class:"labels-container"},Xn=["onClick"],qn={key:0,class:"check-icon"},Yn=o("div",{class:"text"},[o("p",{class:"txt-no-color"},"No color."),o("p",{class:"txt-lng-no-color"},"This won't show up on the front of cards.")],-1),Kn={key:1,class:"edit-btns"};function Wn(t,e,r,a,n,s){return d(),l("section",$n,[n.isAdding?(d(),l("div",Nn,[o("div",zn,[o("span",{onClick:e[2]||(e[2]=v(i=>n.isAdding=!1,["stop"])),class:"back-icon"}),Hn,o("span",{onClick:e[3]||(e[3]=(...i)=>s.closeAction&&s.closeAction(...i)),class:"close-icon"})]),Jn,o("div",jn,[Rn,f(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>n.labelToAdd.title=i),autofocus:""},null,512),[[D,n.labelToAdd.title]]),Qn,o("div",Vn,[(d(!0),l(w,null,A(n.labelColors,i=>(d(),l("span",{onClick:c=>s.setLabelColor(i),class:"labelColor",key:i,style:h({backgroundColor:i})},[n.labelToAdd.color===i?(d(),l("span",qn)):p("",!0)],12,Xn))),128)),Yn]),n.labelToAdd._id?(d(),l("div",Kn,[o("button",{onClick:e[6]||(e[6]=v((...i)=>s.onAddLabel&&s.onAddLabel(...i),["stop"])),class:"save-btn"},"Save"),o("button",{onClick:e[7]||(e[7]=v((...i)=>s.onDeleteLabel&&s.onDeleteLabel(...i),["stop"])),class:"delete-btn"},"Delete")])):(d(),l("button",{key:0,onClick:e[5]||(e[5]=v((...i)=>s.onAddLabel&&s.onAddLabel(...i),["stop"])),class:"add-btn"},"Create"))])])):(d(),l("div",Dn,[o("div",In,[Sn,o("span",{class:"label-menu-exit",onClick:e[0]||(e[0]=(...i)=>s.closeAction&&s.closeAction(...i))})]),Mn,o("div",En,[Pn,Ln,(d(!0),l(w,null,A(r.labels,i=>(d(),l("div",{class:"label-container",key:i._id},[o("span",{onClick:c=>s.toggleLabel(i._id),style:h({backgroundColor:i.color,color:s.labelShadowColor(i.color)}),class:"label"},[o("span",Un,b(i.title),1),s.labelIds.includes(i._id)?(d(),l("span",Gn)):p("",!0)],12,On),o("span",{class:"label-edit-icon",onClick:v(c=>s.editLabel(i),["stop"])},null,8,Fn)]))),128)),o("button",{onClick:e[1]||(e[1]=v((...i)=>s.toggleIsAdding&&s.toggleIsAdding(...i),["stop"])),class:"create-btn"},"Create a new label")])]))])}var _e=y(Tn,[["render",Wn]]);const Zn={props:{task:Object,attachments:Array},data(){return{colors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#172B4D"],defaultImgs:[],searchKeywords:["Productivity","Perspective","Organization","Colorful","Nature","Business","Minimal","Space","Animals"],isSearch:!1,searchPhotos:[],searchKey:""}},created(){this.task.style||(this.task.style={}),this.loadDefaultPhotos()},methods:{async loadDefaultPhotos(){const t=await H.loadDefaultPhotos();this.defaultImgs=t.slice(0,6)},setTaskColor(t){this.isCoverActive=!!t,t||this.setCoverSize("half"),this.$emit("color-set",t)},async setTaskPhoto(t){if(this.isSearch){const e=await H.loadDefaultPhotos();e.pop(),e.unshift(t),H.savePhotosToStorage(e),this.loadDefaultPhotos(),this.isSearch=!1,this.searchKey=""}this.isCoverActive=!!t,t||this.setCoverSize("half"),this.$emit("photo-set",t)},setCoverSize(t){this.$emit("cover-size-set",t)},closeAction(t){this.$emit("close-action",t)},async getPhotosBySearch(){const t=await H.getPhotosByKeyword(this.searchKey);this.searchPhotos=t}},computed:{coverSizesColor(){return this.task.style.photo?"":this.task.style.color?this.task.style.color:"#CFD3DB"},coverSizesPhoto(){return this.task.style.color?"":this.task.style.photo?this.task.style.photo:"#CFD3DB"},isCoverActive(){return!!(this.task.style.color||this.task.style.photo)},currColor(){return this.task.style.color},currPhoto(){return this.task.style.photo},isBackground(){return this.task.style.isBackground}},watch:{searchKey:{async handler(){this.searchKey||(this.searchKey="nature"),this.getPhotosBySearch()},immediate:!0}}},ea={class:"cover-menu"},ta={key:0,class:"cover-menu-first"},sa={class:"cover-menu-header"},oa=o("h3",{class:"menu-title"},"Cover",-1),ra=o("hr",null,null,-1),na={class:"main"},aa=o("h4",null,"Size",-1),ia={class:"cover-size-container"},da={class:"imgs-container"},la={class:"cover-content"},ca={class:"cover-show-bottom"},ua={class:"cover-show-btns"},ha={class:"cover-content"},pa=o("h4",null,"Colors",-1),ma={class:"colors-container"},ga=["onClick"],ba={class:"attachments"},_a=o("h4",null,"Attachments",-1),ka={class:"attachments-container"},va=["onClick"],fa=["src"],ya={class:"photos-main"},Ca=o("h4",null,"Photos from Unsplash",-1),wa={class:"photos-container"},Aa=["onClick"],xa=["src"],Ba={key:1,class:"cover-menu-second"},Ta={class:"header"},$a=o("h3",{class:"menu-title"},"Photo search",-1),Da=o("hr",null,null,-1),Ia=o("h4",null,"Suggested searches",-1),Sa=["onClick"],Ma=o("h4",null,"Top photos",-1),Ea=["src","onClick"];function Pa(t,e,r,a,n,s){const i=U("debounce");return d(),l("section",ea,[n.isSearch?p("",!0):(d(),l("section",ta,[o("div",sa,[oa,o("span",{class:"cover-menu-exit",onClick:e[0]||(e[0]=(...c)=>s.closeAction&&s.closeAction(...c))})]),ra,o("div",na,[aa,o("div",ia,[o("div",da,[o("div",{ref:"halfCover",class:"half-cover",onClick:e[1]||(e[1]=c=>s.setCoverSize("half")),style:h({pointerEvents:s.currColor||s.currPhoto?"auto":"none",boxShadow:s.isBackground?"":s.isCoverActive?"0 0 0 2px #ffffff, 0 0 0 4px #0079bf":""})},[o("div",{class:"head",style:h({backgroundColor:s.coverSizesColor,backgroundImage:`url(${s.coverSizesPhoto})`})},null,4),o("div",la,[o("div",{class:"row-lg",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#cfd3db"})},null,4),o("div",{class:"row-sml",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#cfd3db"})},null,4),o("div",ca,[o("div",ua,[o("div",{class:"cover-show-btn",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#cfd3db"})},null,4),o("div",{class:"cover-show-btn",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#cfd3db"})},null,4)]),o("div",{class:"cover-show-member",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#cfd3db"})},null,4)])])],4),o("div",{ref:"fullCover",class:"full-cover",onClick:e[2]||(e[2]=c=>s.setCoverSize("full")),style:h({backgroundColor:s.coverSizesColor,backgroundImage:`url(${s.coverSizesPhoto})`,pointerEvents:s.isCoverActive?"auto":"none",boxShadow:s.isBackground&&s.isCoverActive?"0 0 0 2px #ffffff, 0 0 0 4px #0079bf":""})},[o("div",ha,[o("div",{class:"row-lg",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#FFF"})},null,4),o("div",{class:"row-sml",style:h({backgroundColor:s.currColor||s.currPhoto?"#6B778C":"#FFF"})},null,4)])],4)]),s.currColor||s.currPhoto?(d(),l("button",{key:0,onClick:e[3]||(e[3]=c=>{s.setTaskColor(""),s.setTaskPhoto("")})},"Remove cover")):p("",!0)]),pa,o("div",ma,[(d(!0),l(w,null,A(n.colors,c=>(d(),l("div",{key:c},[o("span",{class:"color",onClick:u=>s.setTaskColor(c),style:h({backgroundColor:c,boxShadow:s.currColor===c?"0 0 0 2px #ffffff, 0 0 0 4px #0079bf":""})},null,12,ga)]))),128))]),o("div",ba,[_a,o("div",ka,[(d(!0),l(w,null,A(r.attachments,c=>(d(),l("div",{onClick:u=>s.setTaskPhoto(c.url),key:c.asset_id},[o("img",{src:c.url,style:h({boxShadow:s.currPhoto===c.url?"0 0 0 2px #ffffff, 0 0 0 4px #0079bf":""})},null,12,fa)],8,va))),128))])]),o("div",ya,[Ca,o("div",wa,[(d(!0),l(w,null,A(n.defaultImgs,c=>(d(),l("div",{onClick:u=>s.setTaskPhoto(c),key:c},[o("img",{src:c,style:h({boxShadow:s.currPhoto===c?"0 0 0 2px #ffffff, 0 0 0 4px #0079bf":""})},null,12,xa)],8,Aa))),128))]),o("button",{onClick:e[4]||(e[4]=v(c=>n.isSearch=!0,["stop"])),class:"more-photos-btn"},"Search for photos")])])])),n.isSearch?(d(),l("section",Ba,[o("div",Ta,[o("span",{onClick:e[5]||(e[5]=v(c=>n.isSearch=!1,["stop"])),class:"back-btn"}),$a,o("span",{onClick:e[6]||(e[6]=(...c)=>s.closeAction&&s.closeAction(...c)),class:"close-btn"})]),Da,f(o("input",{type:"text",placeholder:"Search Unsplash for photos","onUpdate:modelValue":e[7]||(e[7]=c=>n.searchKey=c)},null,512),[[D,n.searchKey,void 0,{lazy:!0}],[i,400]]),Ia,(d(!0),l(w,null,A(n.searchKeywords,c=>(d(),l("button",{class:"keyword",key:c,onClick:u=>n.searchKey=c},b(c),9,Sa))),128)),Ma,o("div",{class:"search-photos-container",style:h({gridTemplateColumns:n.searchKey?"1fr 1fr":"1fr 1fr 1fr"})},[(d(!0),l(w,null,A(n.searchPhotos,c=>(d(),l("img",{key:c,src:c,onClick:v(u=>s.setTaskPhoto(c),["stop"])},null,8,Ea))),128))],4)])):p("",!0)])}var ke=y(Zn,[["render",Pa]]);const La={data(){return{dueDate:{dueDate:null,isComplete:!1}}},created(){},methods:{setDate(){this.$emit("date-set",G({},this.dueDate))},removeDate(){this.$emit("remove-date")}},computed:{},components:{Datepicker:Be}},Oa={class:"dates-menu"},Ua={class:"dates-menu-header"},Ga=o("h3",{class:"menu-title"},"Dates",-1),Fa=o("hr",null,null,-1),Na={class:"main"};function za(t,e,r,a,n,s){const i=g("Datepicker");return d(),l("section",Oa,[o("div",Ua,[Ga,o("span",{class:"menu-exit",onClick:e[0]||(e[0]=(...c)=>t.closeAction&&t.closeAction(...c))})]),Fa,o("div",Na,[C(i,{menuClassName:"date-picker",modelValue:n.dueDate.dueDate,"onUpdate:modelValue":e[1]||(e[1]=c=>n.dueDate.dueDate=c),inline:"",autoApply:"",enableTimePicker:!1},null,8,["modelValue"]),o("button",{class:"save-btn",onClick:e[2]||(e[2]=(...c)=>s.setDate&&s.setDate(...c))},"Save"),o("button",{class:"remove-btn",onClick:e[3]||(e[3]=(...c)=>s.removeDate&&s.removeDate(...c))},"Remove")]),L(" "+b(n.dueDate.date),1)])}var ve=y(La,[["render",za]]);const Ha={props:{task:Object,pos:Object},components:{labelMenu:_e,coverMenu:ke,datesMenu:ve},created(){this.taskToEdit=G({},this.task)},data(){return{taskToEdit:null,taskDistFromBottom:window.screen.height-this.pos.y-382,menuDivSize:550,isLabelMenuOpen:!1,isCoverMenuOpen:!1,isDatesMenuOpen:!1,isMenuChangeDirection:!1}},methods:{closeActions(t){t.stopPropagation(),t.preventDefault(),this.isLabelMenuOpen=!1,this.isCoverMenuOpen=!1,this.isDatesMenuOpen=!1},closeQuickEdit(){this.$emit("close-quick-edit")},getLabel(t){return this.$store.getters.currBoard.labels.find(a=>a._id===t)},async onSetLabel(t){try{this.taskToEdit.labelIds=t;const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),boardId:e})}catch(e){console.log(e)}},onAddLabel(t){const e=this.$route.params.boardId;this.$store.dispatch({type:"addLabel",label:t,boardId:e})},onDeleteLabel(t){const e=this.$route.params.boardId;this.$store.dispatch({type:"deleteLabel",labelId:t,task:G({},this.taskToEdit),boardId:e})},onSetColor(t){delete this.taskToEdit.style.photo,this.taskToEdit.style.color=t;const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),boardId:e})},onSetCoverSize(t){this.taskToEdit.style.isBackground=t==="full";const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),boardId:e})},setCoverStyle(t,e){this.coverBcg=t,this.coverPhoto=e},async onSetPhoto(t){delete this.taskToEdit.style.color,this.taskToEdit.style.photo=t,t||await this.onSetCoverSize("half");const e=this.$route.params.boardId;await this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),boardId:e}),this.coverPhoto=t},setDate(t){t.dueDate=Date.parse(t.dueDate.toString()),this.taskToEdit.dueDate.dueDate=t.dueDate,this.$store.dispatch({type:"setDate",task:JSON.parse(JSON.stringify(this.taskToEdit)),dueDate:t})},async archive(){const t=this.$route.params.boardId;await this.$store.dispatch({type:"deleteTask",taskId:this.taskToEdit._id,boardId:t})},async saveTaskTitle(){const t=this.$route.params.boardId;this.taskToEdit.title=this.taskToEdit.title.trim(),this.$store.dispatch({type:"saveTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),boardId:t}),this.$emit("close-quick-edit")}},computed:{coverColor(){return`background-color: ${this.taskToEdit.style.color}`},coverPhoto(){return`background-image: url(${this.taskToEdit.style.photo});`},menuStyle(){return this.isMenuChangeDirection?"transform: translateY(-40%);overflow-y: auto;max-height: 400px;right: 0.4%;":"transform: translateY(-40%);overflow-y: auto;max-height: 400px;margin-left:8px;"},labels(){return this.$store.getters.boardLabels},boardId(){return this.$route.params.boardId},labelStyle(){return t=>{console.log(t);const e=this.getLabel(t);return console.log(e),`background-color: ${e==null?void 0:e.color}`}},checklistDisplay(){var t=0,e=0;return this.taskToEdit.checklists.forEach(r=>{r.todos.forEach(a=>{t++,a.isDone&&e++})}),`${e}/${t}`},taskDueDate(){var c,u;if(!((c=this.taskToEdit.dueDate)!=null&&c.dueDate))return;const t=new Date((u=this.taskToEdit.dueDate)==null?void 0:u.dueDate),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getDate(),n=t.getFullYear(),i=new Date(Date.now()).getFullYear();return n!==i?`${r} ${a}, ${n}`:`${r} ${a}`},taskPos(){var t=this.pos.y+this.taskDistFromBottom;return this.task.style.photo?t-=150:this.taskToEdit.style.color&&(t-=32),this.taskDistFromBottom>0?`left:${this.pos.x}px;top:${this.pos.y}px`:`left:${this.pos.x}px;top:${t}px`},menuPosY(){let t=430;this.taskToEdit.style.color?t-=32:this.taskToEdit.style.photo&&(t-=150);let e=window.screen.height-this.pos.y-t;return this.taskDistFromBottom<0&&(e-=this.taskDistFromBottom),e<0?`top:${e}px`:"top:0px"},menuPosX(){return document.body.clientWidth<600?this.pos.x>document.body.clientWidth/2?"left: -250px":"left: 100%":document.body.clientWidth-this.pos.x-this.menuDivSize<0?"left: -250px":"left: 100%"},menuOptionPos(){if(document.body.clientWidth<600)return this.pos.x>document.body.clientWidth/2?"left-menu":"right-menu";let t=document.body.clientWidth-this.pos.x-this.menuDivSize;return this.isMenuChangeDirection=t<0,t<0?"left-menu":"right-menu"},modalDirection(){return console.log(this.isMenuChangeDirection),this.isMenuChangeDirection?"right: 0.4%;transform: translateY(-25%);":" margin-left:8px;transform: translateY(-25%);"}}},Ja={class:"quick-edit-page"},ja={class:"quick-edit-task"},Ra={class:"task-details-container"},Qa={class:"task-labels"},Va={class:"task-badges"},Xa={class:"badges-container"},qa={key:0,class:"date-badge"},Ya=o("span",{class:"date-icon"},null,-1),Ka={class:"date"},Wa={key:1,class:"check-list-badge"},Za=o("span",{class:"check-list-icon"},null,-1),ei={class:"check-list-text"},ti=o("div",{class:"task-members"},[o("div",{class:"member"},[o("img",{class:"member-img",src:me,alt:""})])],-1),si=o("span",{class:"open-card-icon icon"},null,-1),oi=o("span",{class:"edit-option-text"},"Open card",-1),ri=o("span",{class:"edit-labels-icon icon"},null,-1),ni=o("span",{class:"edit-option-text"},"Edit labels",-1),ai=[ri,ni],ii=o("span",{class:"change-members-icon icon"},null,-1),di=o("span",{class:"edit-option-text"},"Change members",-1),li=[ii,di],ci=o("span",{class:"change-cover-icon icon"},null,-1),ui=o("span",{class:"edit-option-text"},"Change cover",-1),hi=[ci,ui],pi=o("span",{class:"move-icon icon"},null,-1),mi=o("span",{class:"edit-option-text"},"Move",-1),gi=[pi,mi],bi=o("span",{class:"copy-icon icon"},null,-1),_i=o("span",{class:"edit-option-text"},"Copy",-1),ki=[bi,_i],vi=o("span",{class:"edit-dates-icon icon"},null,-1),fi=o("span",{class:"edit-option-text"},"Edit dates",-1),yi=[vi,fi],Ci=o("span",{class:"archive-icon icon"},null,-1),wi=o("span",{class:"edit-option-text"},"Archive",-1),Ai=[Ci,wi];function xi(t,e,r,a,n,s){var I;const i=g("router-link"),c=g("label-menu"),u=g("cover-menu"),_=g("dates-menu"),m=U("clickoutside");return d(),l("div",Ja,[o("span",{class:"close-icon",onClick:e[0]||(e[0]=(...B)=>s.closeQuickEdit&&s.closeQuickEdit(...B))}),f((d(),l("div",{class:"quick-edit-card-container",style:h(s.taskPos)},[o("div",ja,[n.taskToEdit.style.photo?(d(),l("div",{key:0,class:"task-cover-img",style:h(s.coverPhoto)},null,4)):p("",!0),n.taskToEdit.style.color?(d(),l("div",{key:1,class:"task-cover-color",style:h(s.coverColor)},null,4)):p("",!0),o("div",Ra,[o("div",Qa,[(d(!0),l(w,null,A(n.taskToEdit.labelIds,B=>(d(),l("span",{class:"label",key:B,style:h(s.labelStyle(B))},null,4))),128))]),f(o("textarea",{class:"task-text",dir:"auto","onUpdate:modelValue":e[1]||(e[1]=B=>n.taskToEdit.title=B)},null,512),[[D,n.taskToEdit.title]]),o("div",Va,[o("span",Xa,[(I=n.taskToEdit.dueDate)!=null&&I.dueDate?(d(),l("div",qa,[Ya,o("span",Ka,b(s.taskDueDate),1)])):p("",!0),n.taskToEdit.checklists?(d(),l("div",Wa,[Za,o("span",ei,b(s.checklistDisplay),1)])):p("",!0)])]),ti])]),o("input",{class:"save-btn",type:"submit",value:"Save",onClick:e[2]||(e[2]=(...B)=>s.saveTaskTitle&&s.saveTaskTitle(...B))}),o("div",{class:"quick-edit-options",style:h([s.menuPosY,s.menuPosX])},[C(i,{to:"/board/"+s.boardId+"/card/"+r.task._id,class:$(["edit-option open-card",s.menuOptionPos]),onClick:s.closeQuickEdit},{default:E(()=>[si,oi]),_:1},8,["to","class","onClick"]),o("div",{onClick:e[3]||(e[3]=B=>n.isLabelMenuOpen=!0),class:$(["edit-option edit-labels",s.menuOptionPos])},ai,2),n.isLabelMenuOpen?(d(),S(c,{key:0,style:h(s.menuStyle),labels:s.labels,task:n.taskToEdit,onLabelAdd:s.onAddLabel,onLabelSet:s.onSetLabel,onLabelDelete:s.onDeleteLabel,onCloseAction:s.closeActions,class:"label-menu"},null,8,["style","labels","task","onLabelAdd","onLabelSet","onLabelDelete","onCloseAction"])):p("",!0),o("div",{class:$(["edit-option change-members",s.menuOptionPos])},li,2),o("div",{onClick:e[4]||(e[4]=B=>n.isCoverMenuOpen=!0),class:$(["edit-option change-cover",s.menuOptionPos])},hi,2),n.isCoverMenuOpen?(d(),S(u,{key:1,class:"cover-menu",style:h(s.menuStyle),onColorSet:s.onSetColor,onPhotoSet:s.onSetPhoto,onCoverSizeSet:s.onSetCoverSize,onCloseAction:s.closeActions,task:n.taskToEdit,attachments:n.taskToEdit.attachments},null,8,["style","onColorSet","onPhotoSet","onCoverSizeSet","onCloseAction","task","attachments"])):p("",!0),o("div",{class:$(["edit-option move",s.menuOptionPos])},gi,2),o("div",{class:$(["edit-option copy",s.menuOptionPos])},ki,2),o("div",{onClick:e[5]||(e[5]=B=>n.isDatesMenuOpen=!0),class:$(["edit-option edit-dates",s.menuOptionPos])},yi,2),n.isDatesMenuOpen?(d(),S(_,{key:2,onDateSet:s.setDate,onCloseAction:s.closeActions,style:h(s.modalDirection)},null,8,["onDateSet","onCloseAction","style"])):p("",!0),o("div",{onClick:e[6]||(e[6]=(...B)=>s.archive&&s.archive(...B)),class:$(["edit-option archive",s.menuOptionPos])},Ai,2)],4)],4)),[[m,s.closeQuickEdit]])])}var fe=y(Ha,[["render",xi]]);const Bi={props:{task:Object,boardId:String},components:{labelPreview:sn,badgePreview:Bn,quickEdit:fe},created(){},data(){return{isQuickEditOpen:!1,quickEditPos:null}},methods:{openQuickEdit(){const t=this.$refs.quickEditBtn.getBoundingClientRect().top,e=this.$refs.quickEditBtn.getBoundingClientRect().right-256;this.quickEditPos={x:e,y:t},this.isQuickEditOpen=!0},closeQuickEdit(){this.isQuickEditOpen=!1}},computed:{labelStyle(t){console.log(t)},isBackgroundImage(){return this.task.style.photo&&this.task.style.isBackground?"text-bold":""},cover(){if(this.task.style.color)return`background-color: ${this.task.style.color}; height: 34px`;if(this.task.style.photo)return`background-image: url('${this.task.style.photo}'); min-height: 260px; background-size: cover`},taskCover(){return!this.task.style.isBackground||!this.task.style.photo&&!this.task.style.color?"":"task-bg-cover"},taskBg(){if(!!this.task.style.isBackground){if(this.task.style.photo)return`background-image: url('${this.task.style.photo}'); height: 260px;display:flex;`;if(this.task.style.color)return`background-color: ${this.task.style.color}; min-height: 56px;display:flex;`}}},unmounted(){}},Ti={class:"main-task-container"},$i={key:0,class:"task-labels"},Di={key:1,class:"text-shadowing"};function Ii(t,e,r,a,n,s){const i=g("label-preview"),c=g("badge-preview"),u=g("router-link"),_=g("quickEdit");return d(),l("section",null,[o("div",Ti,[C(u,{class:"task-preview-container",to:"/board/"+r.boardId+"/card/"+r.task._id},{default:E(()=>[r.task.style.color&&!r.task.style.isBackground||r.task.style.photo&&!r.task.style.isBackground?(d(),l("div",{key:0,class:"task-cover",style:h(s.cover)},null,4)):p("",!0),o("div",{class:$(["task-preview",s.taskCover]),style:h(s.taskBg)},[r.task.style.isBackground?p("",!0):(d(),l("div",$i,[(d(!0),l(w,null,A(r.task.labelIds,m=>(d(),S(i,{label:m,key:m},null,8,["label"]))),128))])),r.task.style.photo&&r.task.style.isBackground?(d(),l("div",Di)):p("",!0),o("span",{class:$(["task-title",s.isBackgroundImage])},b(r.task.title),3),C(c,{task:r.task,class:"task-badges"},null,8,["task"]),o("span",{onClick:e[0]||(e[0]=v((...m)=>s.openQuickEdit&&s.openQuickEdit(...m),["prevent"])),class:"task-quick-edit",ref:"quickEditBtn"},null,512)],6)]),_:1},8,["to"]),n.isQuickEditOpen?(d(),S(_,{key:0,task:r.task,pos:n.quickEditPos,onOpenQuickEdit:s.openQuickEdit,onCloseQuickEdit:s.closeQuickEdit},null,8,["task","pos","onOpenQuickEdit","onCloseQuickEdit"])):p("",!0)])])}var Si=y(Bi,[["render",Ii]]);const Mi={props:{group:Object,boardId:String},components:{taskPreview:Si,Container:ae,Draggable:ie},created(){},data(){return{isAddTask:!1,isEditGroupTitle:!1,taskToAdd:{title:"",groupId:this.group._id},isExtrasOpen:!1}},methods:{toggleAddTask(){this.isAddTask=!this.isAddTask},async addTask(){!this.taskToAdd.title||(await this.$emit("task-added",this.taskToAdd),this.taskToAdd={title:"",groupId:this.group._id})},toggleEditGroupTitle(){this.isEditGroupTitle=!this.isEditGroupTitle,this.isEditGroupTitle&&setTimeout(()=>{this.$refs.editGroupTitle.focus()},100)},saveGroupTitle(){this.$emit("group-title-changed",this.groupToEdit),this.isEditGroupTitle=!this.isEditGroupTitle},async onDrop(t){t.addedIndex===null&&t.removedIndex===null||(this.group.tasks=this.applyDrag(this.group.tasks,t),t.payload._id,await this.$store.dispatch({type:"editGroup",groupToEdit:this.group,boardId:this.boardId}),this.$store.dispatch({type:"saveBoard",board:this.$store.getters.currBoard}))},applyDrag(t,e){const{removedIndex:r,addedIndex:a,payload:n}=e;if(r===null&&a===null)return t;const s=[...t];let i=n;return r!==null&&(i=s.splice(r,1)[0]),a!==null&&s.splice(a,0,i),s},getChildPayload(t){return this.group.tasks[t]},toggleExtrasMenu(){this.isExtrasOpen=!this.isExtrasOpen},deleteGroup(){this.$store.dispatch({type:"deleteGroup",groupId:this.group._id,boardId:this.boardId})}},computed:{addTaskCondition(){return this.isAddTask?"add-task-active":""},groupToEdit(){return G({},this.group)}}},Ei={style:{height:"100%"}},Pi={class:"group-container"},Li={class:"group"},Oi={class:"group-header"},Ui=o("span",{class:"dots-icon"},"...",-1),Gi=[Ui],Fi={key:0,class:"group-extras-menu"},Ni=o("h3",{class:"menu-title"},"List actions",-1),zi=o("span",{class:"extras-exit"},null,-1),Hi=o("hr",null,null,-1),Ji={class:"extras-btns"},ji=o("button",{class:"add-task-btn"},[o("span",null,"Add card...")],-1),Ri=o("button",{class:"copy-group-btn"},[o("span",null,"Copy list...")],-1),Qi=o("button",{class:"sort-by-btn"},[o("span",null,"Sort by...")],-1),Vi=o("span",null,"Archive this list",-1),Xi=[Vi],qi={class:"group-tasks"},Yi=o("span",null,"+",-1),Ki=L(" Add a card "),Wi=[Yi,Ki],Zi={key:1,class:"add-task-active"},ed={class:"textarea-container"},td={class:"add-task-btns"},sd=o("span",{class:"x-icon"},null,-1),od=[sd];function rd(t,e,r,a,n,s){const i=g("task-preview"),c=g("Draggable"),u=g("Container"),_=U("clickoutside");return d(),l("section",Ei,[o("div",Pi,[o("div",Li,[o("div",Oi,[n.isEditGroupTitle?f((d(),l("input",{key:1,onKeyup:e[1]||(e[1]=K((...m)=>s.saveGroupTitle&&s.saveGroupTitle(...m),["enter"])),ref:"editGroupTitle",type:"text","onUpdate:modelValue":e[2]||(e[2]=m=>s.groupToEdit.title=m)},null,544)),[[_,s.saveGroupTitle],[D,s.groupToEdit.title]]):(d(),l("h2",{key:0,onClick:e[0]||(e[0]=(...m)=>s.toggleEditGroupTitle&&s.toggleEditGroupTitle(...m)),class:"group-title"},b(r.group.title),1)),o("div",{onClick:e[3]||(e[3]=(...m)=>s.toggleExtrasMenu&&s.toggleExtrasMenu(...m)),class:"group-extras"},Gi)]),n.isExtrasOpen?f((d(),l("div",Fi,[Ni,zi,Hi,o("div",Ji,[ji,Ri,Qi,o("button",{onClick:e[4]||(e[4]=(...m)=>s.deleteGroup&&s.deleteGroup(...m)),class:"archive-group-btn"},Xi)])])),[[_,s.toggleExtrasMenu]]):p("",!0),o("div",qi,[C(u,{"group-name":"1","get-child-payload":s.getChildPayload,orientation:"vertical",onDrop:s.onDrop,class:"drag-task-container"},{default:E(()=>[(d(!0),l(w,null,A(r.group.tasks,m=>(d(),S(c,{key:m._id},{default:E(()=>[C(i,{task:m,boardId:r.boardId},null,8,["task","boardId"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])]),o("div",{class:$(["add-task",s.addTaskCondition])},[n.isAddTask?f((d(),l("div",Zi,[o("div",ed,[f(o("textarea",{"onUpdate:modelValue":e[6]||(e[6]=m=>n.taskToAdd.title=m),ref:"addTask",placeholder:"Enter a title for this card..."},null,512),[[D,n.taskToAdd.title]])]),o("div",td,[o("button",{onMouseup:e[7]||(e[7]=(...m)=>s.addTask&&s.addTask(...m)),class:"add-task-btn"},"Add Card",32),o("button",{onClick:e[8]||(e[8]=m=>n.isAddTask=!1),class:"cancel-add-task-btn"},od)])])),[[_,s.toggleAddTask]]):(d(),l("div",{key:0,onClick:e[5]||(e[5]=(...m)=>s.toggleAddTask&&s.toggleAddTask(...m)),class:"add-task-unactive"},Wi))],2)])])])}var nd=y(Mi,[["render",rd]]);const ad={props:{board:Object},components:{},async created(){const t=await H.loadDefaultPhotos();this.photos=t},data(){return{currNav:"Menu",photos:null}},methods:{setCurrNav(t){this.currNav=t},changeBoardBgc(t){this.$emit("change-board-bgc",t),this.$store.commit({type:"changeHeaderBgc",bgc:t})},closeMenu(){this.$emit("close-menu")},changeBoardBgp(t){this.$emit("change-board-bgp",t),this.$store.commit({type:"changeHeaderBgc",bgc:"#026aa7"})}},computed:{displayBg(){if(!!this.board)return this.board.style.photo?`background-image: url(${this.board.style.photo})`:`background-color: ${this.board.style.backgroundColor}`},prevPage(){switch(this.currNav){case"Colors":return"Change background";case"Photos":return"Change background";case"Change background":return"Menu"}},backPos(){return this.currNav==="Menu"?"transform: translateX(-50px)":"transform: translateX(0)"},changeBgPos(){return this.currNav==="Change background"?"transform: translateX(0px)":"transform: translateX(600px); position: absolute"},colorsPos(){return this.currNav==="Colors"?"transform: translateX(0px)":"transform: translateX(600px); position: absolute"},photosPos(){return this.currNav==="Photos"?"transform: translateX(0px)":"transform: translateX(600px); position: absolute"}},unmounted(){}},id={class:"board-nav"},dd={class:"title"},ld={class:"close-menu"},cd=o("span",{class:"back-icon"},null,-1),ud=[cd],hd=o("hr",{class:"menu-header-divider"},null,-1),pd={class:"main-menu"},md={key:0,class:"menu-home"},gd=o("h4",null,"Change background",-1),bd=o("div",{class:"photos-card"},null,-1),_d=o("div",{class:"title"},"Photos",-1),kd=[bd,_d],vd=o("div",{class:"colors-card"},null,-1),fd=o("div",{class:"title"},"Colors",-1),yd=[vd,fd],Cd=["onClick"];function wd(t,e,r,a,n,s){return d(),l("nav",id,[o("header",null,[o("div",dd,[o("h3",null,b(n.currNav||"Menu"),1)]),o("div",ld,[o("span",{onClick:e[0]||(e[0]=(...i)=>s.closeMenu&&s.closeMenu(...i)),class:"close-icon"})]),o("div",{style:h(s.backPos),onClick:e[1]||(e[1]=i=>n.currNav=s.prevPage),class:"back-menu"},ud,4),hd]),o("div",pd,[n.currNav==="Menu"?(d(),l("div",md,[o("div",{onClick:e[2]||(e[2]=i=>n.currNav="Change background"),class:"change-bg"},[o("span",{class:"bg-display",style:h(s.displayBg)},null,4),gd])])):p("",!0),o("div",{class:"change-bg",style:h(s.changeBgPos)},[o("div",{onClick:e[3]||(e[3]=i=>s.setCurrNav("Photos")),class:"photos-card-container"},kd),o("div",{onClick:e[4]||(e[4]=i=>s.setCurrNav("Colors")),class:"colors-card-container"},yd)],4),o("div",{style:h(s.colorsPos),class:"bg-colors"},[o("div",{onClick:e[5]||(e[5]=i=>s.changeBoardBgc("#0079bf")),class:"color-card blue-card"}),o("div",{onClick:e[6]||(e[6]=i=>s.changeBoardBgc("#d29034")),class:"color-card orange-card"}),o("div",{onClick:e[7]||(e[7]=i=>s.changeBoardBgc("#529739")),class:"color-card green-card"}),o("div",{onClick:e[8]||(e[8]=i=>s.changeBoardBgc("#af4632")),class:"color-card red-card"}),o("div",{onClick:e[9]||(e[9]=i=>s.changeBoardBgc("#89609e")),class:"color-card purple-card"}),o("div",{onClick:e[10]||(e[10]=i=>s.changeBoardBgc("#cd5a91")),class:"color-card pink-card"}),o("div",{onClick:e[11]||(e[11]=i=>s.changeBoardBgc("#4abf6a")),class:"color-card lightgreen-card"}),o("div",{onClick:e[12]||(e[12]=i=>s.changeBoardBgc("#04adcb")),class:"color-card lightblue-card"}),o("div",{onClick:e[13]||(e[13]=i=>s.changeBoardBgc("#838c90")),class:"color-card gray-card"})],4),o("div",{style:h(s.photosPos),class:"bg-photos"},[(d(!0),l(w,null,A(n.photos,i=>(d(),l("div",{class:"photo-card",style:h("background-image: url("+i+")"),onClick:c=>s.changeBoardBgp(i)},null,12,Cd))),256))],4)])])}var Ad=y(ad,[["render",wd]]);const xd={props:{clickPos:Object},components:{},created(){},data(){return{userToAdd:"",btnWidth:71,btnHeight:35,usersToAdd:[],isSearching:!1}},methods:{searchForUsers(){this.$store.dispatch({type:"searchForUsers",searchInput:this.userToAdd})},addMember(t){this.usersToAdd.some(e=>e._id===t._id)||this.usersToAdd.push(t)},openSearching(){this.isSearching=!0},closeSearching(){this.isSearching=!1},addCheckedUsers(){this.$store.dispatch({type:"addCheckedUsers",users:this.usersToAdd}),this.closeInvite()},closeInvite(){this.$emit("close-invite")},removeUserFromList(t){const e=this.usersToAdd.findIndex(r=>r._id===t);this.usersToAdd.splice(e,1)}},computed:{board(){return this.$store.getters.currBoard},clickedPos(){return`left:${this.clickPos.x-this.btnWidth}px;top:${this.clickPos.y+this.btnHeight}px`},isMembersArr(){return!this.usersToAdd.length},isDisabled(){return this.usersToAdd.length?"btn-enabled":"btn-disabled"},results(){return this.$store.getters.searchedUsers}},watch:{userToAdd:{handler(){this.searchForUsers()}}}},Bd=o("header",null,[o("h4",{class:"menu-title"},"Invite to board"),o("span",{class:"x-icon"})],-1),Td=o("hr",null,null,-1),$d={class:"invite-body"},Dd={key:0,class:"users-to-add"},Id={class:"chosen-user"},Sd=["onClick"],Md=["disabled"],Ed={key:0,class:"no-users-found"},Pd={class:"member-container"},Ld=["onClick"],Od=["src"];function Ud(t,e,r,a,n,s){var u,_;const i=U("debounce"),c=U("clickoutside");return f((d(),l("section",{class:"add-member-container",style:h(s.clickedPos)},[Bd,Td,o("div",$d,[f(o("input",{type:"text",placeholder:"Email address or name","onUpdate:modelValue":e[0]||(e[0]=m=>n.userToAdd=m),onInput:e[1]||(e[1]=(...m)=>s.openSearching&&s.openSearching(...m)),onClick:e[2]||(e[2]=(...m)=>s.openSearching&&s.openSearching(...m))},null,544),[[D,n.userToAdd,void 0,{lazy:!0}],[i,400]]),n.usersToAdd.length?(d(),l("div",Dd,[(d(!0),l(w,null,A(n.usersToAdd,m=>(d(),l("div",Id,[o("span",null,b(m.username),1),o("span",{onClick:I=>s.removeUserFromList(m._id),class:"x-icon"},null,8,Sd)]))),256))])):p("",!0),o("button",{class:$(["add-member-btn",s.isDisabled]),disabled:s.isMembersArr,onClick:e[3]||(e[3]=(...m)=>s.addCheckedUsers&&s.addCheckedUsers(...m))},"Add member"+b(n.usersToAdd.length>1?"s":""),11,Md),n.isSearching?f((d(),l("div",{key:1,class:"search-results",style:h((u=s.results)!=null&&u.length?"":"height: 70px")},[(_=s.results)!=null&&_.length?p("",!0):(d(),l("div",Ed,"Looks like that person isn't a Tablero member yet.")),(d(!0),l(w,null,A(s.results,m=>(d(),l("div",Pd,[o("div",{onClick:I=>s.addMember(m)},[o("img",{src:m.imgUrl,alt:""},null,8,Od),o("span",null,b(m.username),1)],8,Ld)]))),256))],4)),[[c,s.closeSearching]]):p("",!0)])],4)),[[c,s.closeInvite]])}var Gd=y(xd,[["render",Ud]]);const Fd={components:{boardHeader:Zr,boardGroup:nd,boardMenu:Ad,Container:ae,Draggable:ie,quickEdit:fe,inviteMembers:Gd},created(){this.$store.dispatch("loadBoards");const t=this.$route.params.boardId;this.$store.commit({type:"setCurrBoardId",boardId:t}),Q.emit("board-entered",t),Q.on("update-board",this.updateBoard)},data(){return{isAddGroup:!1,groupToAdd:{title:""},isMenuOpen:!1,isAddMemberOpen:!1,invitePos:null}},methods:{updateBoard(){this.$store.dispatch("loadBoards")},saveBoard(t){this.$store.dispatch({type:"saveBoard",board:t})},addGroup(){!this.groupToAdd.title||(this.$store.dispatch({type:"addGroup",boardId:this.board._id,groupToAdd:this.groupToAdd}),this.groupToAdd={title:""})},toggleAddGroup(){this.isAddGroup?setTimeout(()=>{this.isAddGroup=!1},100):(this.isAddGroup=!0,setTimeout(()=>{this.$refs.addGroup.focus()},100))},async addTask(t){await this.$store.dispatch({type:"addTask",task:t,boardId:this.board._id})},updateGroup(t){this.$store.dispatch({type:"editGroup",groupToEdit:t,boardId:this.board._id})},openMenu(){this.isMenuOpen=!0},changeBoardBgc(t){this.$store.dispatch({type:"changeBoardBgc",bgc:t,boardId:this.board._id})},changeBoardBgp(t){this.$store.dispatch({type:"changeBoardBgp",url:t,boardId:this.board._id})},closeMenu(){this.isMenuOpen=!1},onDrop(t){this.board.groups=this.applyDrag(this.board.groups,t),this.$store.dispatch({type:"saveBoard",board:this.board})},applyDrag(t,e){const{removedIndex:r,addedIndex:a,payload:n}=e;if(r===null&&a===null)return t;const s=[...t];let i=n;return r!==null&&(i=s.splice(r,1)[0]),a!==null&&s.splice(a,0,i),s},toggleInvite(t){this.invitePos=t,this.isAddMemberOpen=!this.isAddMemberOpen}},computed:{board(){return this.$store.getters.currBoard},addGroupCondition(){return this.isAddGroup?"add-group-active":""},boardBg(){if(!(!this.board.style.backgroundColor&&!this.board.style.photo))return this.board.style.backgroundColor?`background-color: ${this.board.style.backgroundColor}`:`background-image: url('${this.board.style.photo}')`},menuStatus(){return this.isMenuOpen?"menu-open":"menu-close"},bgc(){return this.$store.getters.boardBgc},textColor(){if(!!this.bgc)return this.bgc.isLight?"color: #172b4d":"color: white"},btnBgc(){if(!!this.bgc)return this.bgc.isLight?"background-color: #0000001a":"background-color: #ffffff3d"},linear(){if(!(!this.board.style.backgroundColor&&!this.board.style.photo))return this.board.style.backgroundColor?"":"background: linear-gradient(180deg, #0000003d 0, #0000003d 48px, #0000 80px, #0000);"}},watch:{board:{async handler(){if(this.board.style.photo){const e=await new de().getColorAsync(this.board.style.photo);this.$store.commit({type:"changeHeaderBgc",bgc:e.rgb,isLight:e.isLight});return}else this.$store.commit({type:"changeHeaderBgc",bgc:this.board.style.backgroundColor})}}},unmounted(){}},Nd={key:1},zd={class:"add-group-btns"},Hd=o("span",{class:"x-icon"},null,-1),Jd=[Hd];function jd(t,e,r,a,n,s){const i=g("board-header"),c=g("board-group"),u=g("Draggable"),_=g("Container"),m=g("invite-members"),I=g("board-menu"),B=g("router-view"),M=U("clickoutside");return d(),l(w,null,[s.board?(d(),l("div",{key:0,class:"main-board",style:h(s.boardBg)},[o("header",null,[C(i,{onBoardTitleChanged:s.saveBoard,onOpenMenu:s.openMenu,onOpenInvite:s.toggleInvite},null,8,["onBoardTitleChanged","onOpenMenu","onOpenInvite"])]),o("div",{class:"groups-container",style:h(s.linear)},[s.board.groups.length?(d(),S(_,{key:0,orientation:"horizontal",onDrop:s.onDrop,class:"drag-container"},{default:E(()=>[(d(!0),l(w,null,A(s.board.groups,T=>(d(),S(u,{key:T._id},{default:E(()=>[C(c,{onGroupTitleChanged:s.updateGroup,onTaskAdded:s.addTask,group:T,boardId:s.board._id},null,8,["onGroupTitleChanged","onTaskAdded","group","boardId"])]),_:2},1024))),128))]),_:1},8,["onDrop"])):p("",!0),o("div",{class:$(["add-group",s.addGroupCondition]),onClick:e[5]||(e[5]=(...T)=>s.toggleAddGroup&&s.toggleAddGroup(...T)),style:h(n.isAddGroup?"":s.btnBgc)},[n.isAddGroup?f((d(),l("div",Nd,[f(o("input",{ref:"addGroup",type:"text","onUpdate:modelValue":e[0]||(e[0]=T=>n.groupToAdd.title=T),placeholder:"Enter list title...",onKeyup:e[1]||(e[1]=K((...T)=>s.addGroup&&s.addGroup(...T),["enter"])),onClick:e[2]||(e[2]=(...T)=>s.toggleAddGroup&&s.toggleAddGroup(...T))},null,544),[[D,n.groupToAdd.title]]),o("div",zd,[o("button",{onClick:e[3]||(e[3]=(...T)=>s.addGroup&&s.addGroup(...T)),class:"add-group-btn"},"Add list"),o("button",{onClick:e[4]||(e[4]=(...T)=>s.toggleAddGroup&&s.toggleAddGroup(...T)),class:"cancel-add-group-btn"},Jd)])])),[[M,s.toggleAddGroup]]):(d(),l("span",{key:0,style:h(s.textColor)},"+ Add another list",4))],6)],4)],4)):p("",!0),n.isAddMemberOpen?(d(),S(m,{key:1,clickPos:n.invitePos,onCloseInvite:s.toggleInvite},null,8,["clickPos","onCloseInvite"])):p("",!0),C(I,{onChangeBoardBgc:s.changeBoardBgc,onChangeBoardBgp:s.changeBoardBgp,onCloseMenu:s.closeMenu,class:$(s.menuStatus),board:s.board},null,8,["onChangeBoardBgc","onChangeBoardBgp","onCloseMenu","class","board"]),C(B)],64)}var Rd=y(Fd,[["render",jd]]);const Qd={props:{comment:Object,user:Object},data(){return{isEditing:!1,editTxt:this.comment.txt}},created(){},methods:{deleteComment(t){this.$emit("delete-comment",t)},saveComment(){this.$emit("save-comment",this.editTxt,this.comment._id),this.isEditing=!1}},computed:{commentTime(){return t=>{const e=new Date(t).toString().split(" ");return e[0]+" "+e[1]+" "+e[2]+" "+e[3]}}},components:{avatarProfile:J}},Vd={class:"content"},Xd={class:"comment-header"},qd={class:"comment-fullname"},Yd={class:"comment-time"},Kd={class:"comment-txt"},Wd={key:0},Zd={key:1,class:"comment-edit"},el={key:0,class:"comment-btns"},tl=L("- ");function sl(t,e,r,a,n,s){var c,u,_,m,I,B;const i=g("avatar-profile");return d(),l("section",null,[C(i,{username:(u=(c=r.comment)==null?void 0:c.byMember)==null?void 0:u.username},null,8,["username"]),o("div",Vd,[o("div",Xd,[o("span",qd,b((m=(_=r.comment)==null?void 0:_.byMember)==null?void 0:m.username),1),o("span",Yd,b(s.commentTime((I=r.comment)==null?void 0:I.createdAt)),1)]),o("div",Kd,[n.isEditing?(d(),l("div",Zd,[f(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=M=>n.editTxt=M)},null,512),[[D,n.editTxt]]),o("div",null,[o("button",{onClick:e[1]||(e[1]=v((...M)=>s.saveComment&&s.saveComment(...M),["stop"]))},"Save"),o("span",{onClick:e[2]||(e[2]=v(M=>n.isEditing=!1,["stop"])),class:"exit-icon"})])])):(d(),l("p",Wd,b(r.comment.txt),1))]),((B=r.comment)==null?void 0:B.byMember._id)===r.user._id&&!n.isEditing?(d(),l("div",el,[o("button",{onClick:e[3]||(e[3]=v(M=>n.isEditing=!0,["stop"])),class:"edit-btn"},"Edit"),tl,o("button",{onClick:e[4]||(e[4]=M=>s.deleteComment(r.comment._id)),class:"delete-btn"},"Delete")])):p("",!0)])])}var ol=y(Qd,[["render",sl]]);const rl={props:{comments:Array,members:Array,user:Object},data(){return{txt:"",isEditing:!1}},created(){},methods:{addComment(){this.$emit("add-comment",this.txt),this.hideButton(),this.txt=""},showButton(){this.$refs["comment-box"].style.height="85px",this.$refs["save-btn"].style.pointerEvents="auto",this.$refs["save-btn"].style.opacity=1},hideButton(){this.$refs["comment-box"].style.height="35px",this.$refs["save-btn"].style.opacity=0,this.$refs["save-btn"].style.pointerEvents="none"},deleteComment(t){this.$emit("delete-comment",t)},saveComment(t,e){this.$emit("save-comment",t,e)}},computed:{},components:{avatarProfile:J,activitiesComment:ol}},nl={class:"activities-container module"},al=o("div",{class:"header"},[o("span",{class:"icon"}),o("h2",null,"Activity"),o("button",null,"Hide details")],-1),il={ref:"comment-box",class:"comment-box"},dl={class:"comments-list"};function ll(t,e,r,a,n,s){const i=g("avatar-profile"),c=g("activities-comment"),u=U("clickoutside");return d(),l("section",null,[o("div",nl,[al,f((d(),l("div",il,[C(i,{username:r.user.username},null,8,["username"]),f(o("textarea",{ref:"textarea",onFocus:e[0]||(e[0]=(..._)=>s.showButton&&s.showButton(..._)),placeholder:"Write a comment...","onUpdate:modelValue":e[1]||(e[1]=_=>n.txt=_)},null,544),[[D,n.txt]]),o("button",{ref:"save-btn",onClick:e[2]||(e[2]=(..._)=>s.addComment&&s.addComment(..._)),class:"save-comment"},"Save",512)])),[[u,s.hideButton]]),o("ul",dl,[(d(!0),l(w,null,A(r.comments,_=>(d(),l("li",{key:_.id,class:"comment"},[C(c,{onDeleteComment:s.deleteComment,onSaveComment:s.saveComment,user:r.user,comment:_},null,8,["onDeleteComment","onSaveComment","user","comment"])]))),128))])])])}var cl=y(rl,[["render",ll]]);const ul={data(){return{photoLink:null}},created(){},methods:{attachFile(t){let e=t;typeof t!="string"&&(e=e.path[0].files[0]),this.$emit("attach-file",e)},closeAction(t){this.$emit("close-action",t)}},computed:{}},hl={class:"attachment-menu"},pl={class:"attachment-header"},ml=o("h3",{class:"menu-title"},"Attach from...",-1),gl=o("hr",null,null,-1),bl=o("div",{class:"computer-attach-container"},[o("p",{class:"computer-attach"},"Computer")],-1),_l=o("hr",null,null,-1),kl=o("h3",{class:"link-title"},"Attach a link",-1);function vl(t,e,r,a,n,s){return d(),l("section",hl,[o("div",pl,[ml,o("span",{onClick:e[0]||(e[0]=(...i)=>s.closeAction&&s.closeAction(...i)),class:"icon attachment-exit"})]),gl,o("label",null,[bl,o("input",{type:"file",onChange:e[1]||(e[1]=(...i)=>s.attachFile&&s.attachFile(...i)),hidden:""},null,32)]),_l,kl,f(o("input",{type:"text",placeholder:"Paste a photo link here...","onUpdate:modelValue":e[2]||(e[2]=i=>n.photoLink=i)},null,512),[[D,n.photoLink]]),o("button",{onClick:e[3]||(e[3]=i=>s.attachFile(n.photoLink))},"Attach")])}var fl=y(ul,[["render",vl]]);const yl={props:{attachments:Array,coverPhoto:String},data(){return{}},created(){},methods:{onDeleteAttachment(t){this.$emit("delete-attachment",t)},onSetPhoto(t){this.$emit("set-photo",t)}},computed:{}},Cl={class:"task-details-attachments"},wl=o("span",{class:"icon attachments-icon"},null,-1),Al=o("h2",null,"Attachments",-1),xl={class:"attachment"},Bl={class:"attachment-pic"},Tl=["src"],$l={class:"attachment-main"},Dl={class:"header"},Il=o("span",{class:"icon arrow-icon"},null,-1),Sl=L(" Added ... ago - "),Ml=o("button",null,"Comment",-1),El=L(" - "),Pl=["onClick"],Ll=L(" - "),Ol=o("button",null,"Edit",-1),Ul=["onClick"],Gl=o("span",{class:"icon cover-icon"},null,-1),Fl=o("span",null,"Make cover",-1),Nl=[Gl,Fl],zl=o("span",{class:"icon cover-icon"},null,-1),Hl=o("span",null,"Remove cover",-1),Jl=[zl,Hl];function jl(t,e,r,a,n,s){return d(),l("div",Cl,[wl,Al,(d(!0),l(w,null,A(r.attachments,i=>(d(),l("div",xl,[o("div",Bl,[(i==null?void 0:i.resource_type)==="image"?(d(),l("img",{key:0,src:i.url},null,8,Tl)):p("",!0)]),o("div",$l,[o("div",Dl,[o("h4",null,[L(b(i.original_filename)+"."+b(i.format)+" ",1),Il])]),o("p",null,[Sl,Ml,El,o("button",{onClick:c=>s.onDeleteAttachment(i.asset_id)},"Delete",8,Pl),Ll,Ol]),r.coverPhoto!==i.url?(d(),l("button",{key:0,class:"make-cover-btn",onClick:v(c=>s.onSetPhoto(i.url),["stop"])},Nl,8,Ul)):p("",!0),r.coverPhoto===i.url?(d(),l("button",{key:1,class:"make-cover-btn",onClick:e[0]||(e[0]=v(c=>s.onSetPhoto(""),["stop"]))},Jl)):p("",!0)])]))),256))])}var Rl=y(yl,[["render",jl]]);const Ql={props:{checklist:Object},data(){return{txt:"",currOpenMore:"",isAdding:!1}},created(){},methods:{addTodo(){this.checklist.todos.push({_id:O.makeId(),txt:this.txt,isDone:!1}),this.updateChecklist(),this.txt=""},updateChecklist(){this.$emit("checklistUpdated",this.checklist)},removeTodo(t){const e=this.checklist.todos.findIndex(r=>r._id===t);this.checklist.todos.splice(e,1),this.updateChecklist()},closeMoreMenus(){this.currOpenMore=""},convertToCard(t){this.$emit("convert-todo",G({},t),JSON.parse(JSON.stringify(this.checklist)))},showMore(t){for(let e in this.$refs)e===t?this.$refs[e][0].style.visibility="visible":e!==t&&this.$refs[e][0]&&(this.$refs[e][0].style.visibility="hidden")},openAdding(){this.isAdding=!0,setTimeout(()=>{this.$refs.text.focus()},50)},closeAdding(){this.isAdding=!1}},computed:{todoPercentage(){var e;if(!((e=this.checklist.todos)!=null&&e.length))return 0;let t=this.checklist.todos.reduce((r,a)=>(a.isDone&&r++,r),0);return Math.floor(t/this.checklist.todos.length*100)},progressColor(){return this.todoPercentage===100?"#61bd4f":"#5ba4cf"}}},Vl={class:"progress-bar-basic"},Xl={class:"todo-perc"},ql=["onMouseover"],Yl={class:"todo-text-container"},Kl={class:"checkbox-container"},Wl=["onUpdate:modelValue"],Zl=o("span",{class:"custom-checkbox"},null,-1),ec=["onClick"],tc={key:0,class:"more-menu"},sc=o("div",{class:"more-header"},[o("h3",{class:"menu-title"},"Item actions")],-1),oc=o("hr",null,null,-1),rc={class:"more-main"},nc=["onClick"],ac=["onClick"],ic={class:"add-item-container"},dc=o("span",{class:"icon stop-adding-icon"},null,-1);function lc(t,e,r,a,n,s){const i=U("clickoutside");return d(),l("section",null,[o("div",Vl,[o("div",Xl,b(s.todoPercentage),1),o("div",{style:h({width:s.todoPercentage+"%",background:s.progressColor}),class:"progress-bar-actual"},null,4)]),o("ul",null,[(d(!0),l(w,null,A(r.checklist.todos,c=>(d(),l("li",{onMouseover:u=>s.showMore(c._id),onMouseleave:e[1]||(e[1]=u=>s.showMore("")),class:"todo",key:c._id},[o("div",Yl,[o("label",Kl,[f(o("input",{class:"is-done-btn",type:"checkbox",onChange:e[0]||(e[0]=(...u)=>s.updateChecklist&&s.updateChecklist(...u)),"onUpdate:modelValue":u=>c.isDone=u},null,40,Wl),[[le,c.isDone]]),Zl]),o("p",{style:h(c.isDone?"text-decoration: line-through":"")},b(c.txt),5)]),o("span",{ref_for:!0,ref:c._id,class:"todo-more",onClick:u=>n.currOpenMore=c._id},"...",8,ec),n.currOpenMore===c._id?f((d(),l("div",tc,[sc,oc,o("div",rc,[o("p",{onClick:u=>s.convertToCard(c)},"Convert to card",8,nc),o("p",{onClick:u=>s.removeTodo(c._id)},"Delete",8,ac)])])),[[i,s.closeMoreMenus]]):p("",!0)],40,ql))),128)),n.isAdding?p("",!0):(d(),l("button",{key:0,onClick:e[2]||(e[2]=v((...c)=>s.openAdding&&s.openAdding(...c),["stop"])),class:"add-item-btn"},"Add an item"))]),f((d(),l("div",ic,[f(o("textarea",{ref:"text",type:"text",class:"todo-text","onUpdate:modelValue":e[3]||(e[3]=c=>n.txt=c)},null,512),[[D,n.txt]]),o("button",{onClick:e[4]||(e[4]=c=>s.addTodo()),class:""},"Add"),dc])),[[Te,n.isAdding],[i,s.closeAdding]])])}var cc=y(Ql,[["render",lc]]);const uc={props:{checklists:Array},data(){return{isAdding:!1}},created(){},methods:{updateChecklist(t){const e=this.checklists.findIndex(r=>r._id===t._id);this.checklists.splice(e,1,t),this.$emit("checklists-update",this.checklists)},deleteChecklist(t){const e=this.checklists.findIndex(r=>r._id===t);this.checklists.splice(e,1),this.$emit("checklists-update",this.checklists)},convertToCard(t,e){this.$emit("convert-todo",t,e)}},computed:{},components:{checklistTodos:cc}},hc={class:"task-checklists"},pc={class:"checklist-header"},mc=o("span",{class:"icon checklist-icon"},null,-1),gc=["onClick"];function bc(t,e,r,a,n,s){const i=g("checklist-todos");return d(),l("section",hc,[(d(!0),l(w,null,A(r.checklists,c=>(d(),l("div",{class:"checklist",key:c._id},[o("div",pc,[mc,o("h2",null,b(c.title),1),o("button",{class:"delete-checklist-btn",onClick:v(u=>s.deleteChecklist(c._id),["stop"])},"Delete",8,gc)]),C(i,{onConvertTodo:s.convertToCard,onChecklistUpdated:s.updateChecklist,checklist:c},null,8,["onConvertTodo","onChecklistUpdated","checklist"])]))),128))])}var _c=y(uc,[["render",bc]]);const kc={data(){return{title:"Checklist"}},created(){},methods:{closeAction(t){this.$emit("close-action",t)},setTitle(){this.$emit("checklist-title-set",this.title)}},computed:{}},vc={class:"checklist-menu"},fc={class:"checklist-menu-header"},yc=o("h3",{class:"menu-title"},"Add checklist",-1),Cc=o("hr",null,null,-1),wc=o("h4",null,"Title",-1);function Ac(t,e,r,a,n,s){return d(),l("section",vc,[o("div",fc,[yc,o("span",{class:"checklist-menu-exit",onClick:e[0]||(e[0]=(...i)=>s.closeAction&&s.closeAction(...i))})]),Cc,wc,f(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>n.title=i)},null,512),[[D,n.title]]),o("button",{onClick:e[2]||(e[2]=(...i)=>s.setTitle&&s.setTitle(...i))},"Add")])}var xc=y(kc,[["render",Ac]]);const Bc={props:{members:Array,taskMembers:Array},data(){return{filterTxt:""}},created(){},methods:{closeAction(t){this.$emit("close-action",t)},addMemberToTask(t){this.$emit("add-member",t)}},computed:{filteredMembers(){if(!this.filterTxt)return this.members;const t=new RegExp(this.filterTxt,"i");return this.members.filter(r=>t.test(r.username))}},components:{avatarProfile:J}},Tc={class:"members-menu"},$c={class:"members-menu-header"},Dc=o("h3",{class:"menu-title"},"Members",-1),Ic=o("hr",null,null,-1),Sc=o("h4",null,"Board members",-1),Mc={class:"members-container"},Ec=["onClick"],Pc={class:"content-container"},Lc={class:"member-username"},Oc={key:0,class:"icon checkmark-icon"};function Uc(t,e,r,a,n,s){const i=g("avatar-profile"),c=U("debounce");return d(),l("section",Tc,[o("div",$c,[Dc,o("span",{class:"icon members-menu-exit",onClick:e[0]||(e[0]=(...u)=>s.closeAction&&s.closeAction(...u))})]),Ic,f(o("input",{type:"text",placeholder:"Search members","onUpdate:modelValue":e[1]||(e[1]=u=>n.filterTxt=u)},null,512),[[D,n.filterTxt,void 0,{lazy:!0}],[c,400]]),Sc,o("div",Mc,[s.filteredMembers?(d(!0),l(w,{key:0},A(s.filteredMembers,u=>{var _;return d(),l("div",{key:u._id,class:"member",onClick:m=>s.addMemberToTask(u._id)},[o("div",Pc,[C(i,{class:"member-profile",username:u.username},null,8,["username"]),o("span",Lc,b(u.username),1)]),(_=r.taskMembers)!=null&&_.includes(u._id)?(d(),l("span",Oc)):p("",!0)],8,Ec)}),128)):p("",!0)])])}var Gc=y(Bc,[["render",Uc]]);const Fc={props:{members:Array},data(){return{}},created(){},methods:{openMenu(){this.$emit("open-menu")}},computed:{},components:{avatarProfile:J}},Nc={class:"task-members"},zc=o("h4",null,"Members",-1),Hc={class:"members-container"},Jc=o("span",{class:"icon plus-icon"},null,-1),jc=[Jc];function Rc(t,e,r,a,n,s){const i=g("avatar-profile");return d(),l("section",Nc,[zc,o("div",Hc,[r.members?(d(!0),l(w,{key:0},A(r.members,c=>(d(),l("div",{class:"member",key:c._id},[C(i,{class:"member-pic",onClick:s.openMenu,username:c.username},null,8,["onClick","username"])]))),128)):p("",!0),o("div",{onClick:e[0]||(e[0]=(...c)=>s.openMenu&&s.openMenu(...c)),class:"add-member"},jc)])])}var Qc=y(Fc,[["render",Rc]]);const Vc={data(){return{isEditingDesc:!1,isEditingTitle:!1,currDescTxt:"",currAction:"",coverBcg:null,coverPhoto:null,isArchiving:!1}},methods:{async addComment(t){(!this.task.comments||!this.task.comments.length)&&(this.task.comments=[]);const e={txt:t,createdAt:Date.now(),byMember:this.currUser};this.$store.dispatch({type:"addComment",comment:e,task:this.task})},deleteComment(t){this.$store.dispatch({type:"deleteComment",commentId:t,task:this.task})},saveComment(t,e){this.$store.dispatch({type:"saveComment",txt:t,commentId:e,task:this.task})},async setDescTxt(){const t=this.$route.params.boardId;this.task.description=this.task.description.trim(),this.$store.dispatch({type:"saveTask",task:this.task,boardId:t})},closeTaskDetails(){if(this.currAction)return;const t=this.$route.params.boardId;this.$router.push("/board/"+t)},setCurrAction(t){this.currAction=t},closeAction(t){t.stopPropagation(),this.currAction=null},closeEditingTitle(){this.isEditingTitle=!1;const t=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:t})},async onSetLabel(t){try{this.task.labelIds=t;const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:e})}catch(e){console.log(e)}},onSetColor(t){delete this.task.style.photo,this.task.style.color=t;const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:e})},onAddLabel(t){const e=this.$route.params.boardId;this.$store.dispatch({type:"addLabel",label:t,boardId:e})},onDeleteLabel(t){const e=this.$route.params.boardId;this.$store.dispatch({type:"deleteLabel",labelId:t,task:G({},this.task),boardId:e})},async onSetPhoto(t){delete this.task.style.color,this.task.style.photo=t,t||await this.onSetCoverSize("half");const e=this.$route.params.boardId;await this.$store.dispatch({type:"saveTask",task:this.task,boardId:e}),this.coverPhoto=t},onSetCoverSize(t){this.task.style.isBackground=t==="full";const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:e})},setCoverStyle(t,e){this.coverBcg=t,this.coverPhoto=e},async onAttachFile(t){this.$store.dispatch("attachFile",{file:t,task:this.task})},async onDeleteAttachment(t){this.$store.dispatch({type:"deleteAttachment",id:t,task:this.task})},async archive(){this.isArchiving=!1;const t=this.$route.params.boardId;await this.$store.dispatch({type:"deleteTask",taskId:this.task._id,boardId:t}),this.$router.push(`/board/${t}`)},setDate(t){t.dueDate=Date.parse(t.dueDate.toString()),this.$store.dispatch({type:"setDate",task:this.task,dueDate:t})},removeDate(){this.task.dueDate={};const t=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:t})},updateTask(){const t=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:t})},setChecklistTitle(t){this.$store.dispatch({type:"saveChecklist",title:t,task:this.task})},async convertToCard(t,e){await this.$store.dispatch({type:"convertTodoToTask",txt:t.txt,currTask:this.task});const r=e.todos.findIndex(n=>n._id===t._id);e.todos.splice(r,1);const a=this.task.checklists.findIndex(n=>n._id===e._id);this.task.checklists.splice(a,1,e),this.updateTask()},addMemberToTask(t){if(this.task.memberIds||(this.task.memberIds=[]),!this.task.memberIds.includes(t))this.task.memberIds.push(t);else{const r=this.task.memberIds.findIndex(a=>a===t);this.task.memberIds.splice(r,1)}const e=this.$route.params.boardId;this.$store.dispatch({type:"saveTask",task:this.task,boardId:e})}},computed:{task(){return this.$store.getters.currTask},labels(){return this.$store.getters.boardLabels},dueDate(){if(!this.$store.getters.currTask.dueDate.dueDate)return;let t=new Date(this.$store.getters.currTask.dueDate.dueDate);const e={month:"short"};return t=`${new Intl.DateTimeFormat("en-US",e).format(t)} ${t.getDate()}, ${t.getFullYear()}`,t},boardMembers(){return this.$store.getters.boardMembers},taskMembers(){if(!this.task.memberIds)return;const t=[];return this.task.memberIds.forEach(e=>{this.boardMembers.forEach(r=>{r._id===e&&t.push(r)})}),t},currGroup(){const t=this.$store.getters.currBoard;let e;return t.groups.forEach(r=>{const a=r.tasks.find(n=>n._id===this.task._id);a&&(e=a)}),e},currUser(){return this.$store.getters.loggedinUser}},components:{taskActivities:cl,labelMenu:_e,coverMenu:ke,attachmentMenu:fl,datesMenu:ve,checklistMenu:xc,taskAttachments:Rl,taskChecklists:_c,membersMenu:Gc,taskMembers:Qc},watch:{"$route.params.taskId":{async handler(){const t=this.$route.params.boardId,e=this.$route.params.cardId;await this.$store.dispatch({type:"getTask",taskId:e,boardId:t})},deep:!0,immediate:!0},isEditingDesc:{handler(){this.isEditingDesc&&(this.currDescTxt=this.task.description)}},"task.style":{async handler(){if(!!this.task)if(this.task.style.photo){console.log(this.task);const e=await new de().getColorAsync(this.task.style.photo);this.setCoverStyle(e.hexa,this.task.style.photo)}else this.task.style.color&&this.setCoverStyle(this.task.style.color,null)},immediate:!0,deep:!0}}},Xc={class:"task-details-overlay"},qc={class:"task-total-container"},Yc={class:"btn-container"},Kc=o("span",{class:"icon cover-icon"},null,-1),Wc=o("span",null,"Cover",-1),Zc=[Kc,Wc],eu={key:1,class:"task-details-main"},tu={class:"head"},su={class:"text"},ou=o("span",{class:"icon"},null,-1),ru={class:"details-main"},nu={class:"content"},au={class:"task-top-actions module"},iu={key:1,class:"task-labels"},du=o("h4",null,"Labels",-1),lu={class:"task-details-labels-container"},cu={class:"task-details-label-title"},uu=o("span",{class:"add-icon"},null,-1),hu=[uu],pu={key:2,class:"task-dates"},mu=o("h4",null,"Dates",-1),gu={class:"main"},bu={class:""},_u={key:0,class:"date-complete-label"},ku={class:"description module"},vu={class:"text"},fu=o("span",{class:"icon desc-icon"},null,-1),yu=o("h2",null,"Description",-1),Cu={key:2,class:"desc-edit"},wu={class:"edit-btns"},Au={class:"actions-menu"},xu=o("h3",null,"Add to card",-1),Bu=o("span",{class:"icon members-icon"},null,-1),Tu=o("span",null,"Members",-1),$u=[Bu,Tu],Du=o("span",{class:"icon labels-icon"},null,-1),Iu=o("span",null,"Labels",-1),Su=[Du,Iu],Mu=o("span",{class:"icon checklist-icon"},null,-1),Eu=o("span",null,"Checklist",-1),Pu=[Mu,Eu],Lu=o("span",{class:"icon dates-icon"},null,-1),Ou=o("span",null,"Dates",-1),Uu=[Lu,Ou],Gu=o("span",{class:"icon attachment-icon"},null,-1),Fu=o("span",null,"Attachment",-1),Nu=[Gu,Fu],zu=o("span",{class:"icon cover-icon"},null,-1),Hu=o("span",null,"Cover",-1),Ju=[zu,Hu],ju=o("h3",null,"Actions",-1),Ru=o("span",{class:"icon archive-icon"},null,-1),Qu=o("span",null,"Archive",-1),Vu=[Ru,Qu],Xu=o("span",{class:"icon delete-icon"},null,-1),qu=o("span",null,"Delete",-1),Yu=[Xu,qu];function Ku(t,e,r,a,n,s){var I,B,M,T,W,Z,ee,te,se;const i=g("task-members"),c=g("task-attachments"),u=g("task-checklists"),_=g("task-activities"),m=U("clickoutside");return d(),l("div",Xc,[f((d(),l("section",qc,[((I=s.task)==null?void 0:I.style.color)||((B=s.task)==null?void 0:B.style.photo)?(d(),l("div",{key:0,class:"task-details-cover",ref:"detailsCover",style:h({backgroundColor:n.coverBcg,backgroundImage:`url(${n.coverPhoto})`})},[o("span",{class:"icon task-close-btn",onClick:e[0]||(e[0]=v((...k)=>s.closeTaskDetails&&s.closeTaskDetails(...k),["stop"]))}),o("div",Yc,[o("button",{onClick:e[1]||(e[1]=v(k=>s.setCurrAction("coverMenu"),["stop"]))},Zc)])],4)):p("",!0),s.task?(d(),l("section",eu,[o("div",tu,[o("div",su,[ou,f(o("input",{onFocus:e[2]||(e[2]=k=>n.isEditingTitle=!0),onBlur:e[3]||(e[3]=(...k)=>s.closeEditingTitle&&s.closeEditingTitle(...k)),style:h({backgrounColor:n.isEditingTitle?"#fff":"",boxShadow:n.isEditingTitle?"inset 0 0 0 1px #0079bf":""}),class:"title-txt","onUpdate:modelValue":e[4]||(e[4]=k=>s.task.title=k),type:"text"},null,36),[[D,s.task.title]]),o("p",null,"in list "+b(s.currGroup.title),1)]),!((M=s.task)!=null&&M.style.color)&&!((T=s.task)!=null&&T.style.photo)?(d(),l("span",{key:0,class:"icon task-close-btn",onClick:e[5]||(e[5]=v((...k)=>s.closeTaskDetails&&s.closeTaskDetails(...k),["stop"]))})):p("",!0)]),o("div",ru,[o("div",nu,[o("div",au,[(W=s.task.memberIds)!=null&&W.length?(d(),S(i,{key:0,onOpenMenu:e[6]||(e[6]=k=>s.setCurrAction("membersMenu")),members:s.taskMembers},null,8,["members"])):p("",!0),(Z=s.task.labelIds)!=null&&Z.length?(d(),l("div",iu,[du,o("div",lu,[(d(!0),l(w,null,A(s.labels,k=>(d(),l("span",{key:k._id},[s.task.labelIds.includes(k._id)?(d(),l("span",{key:0,class:"task-details-label",style:h({backgroundColor:k.color}),onClick:e[7]||(e[7]=Bh=>s.setCurrAction("labelMenu"))},[o("span",cu,b(k.title),1)],4)):p("",!0)]))),128)),o("span",{onClick:e[8]||(e[8]=k=>s.setCurrAction("labelMenu")),class:"task-details-label add-btn"},hu)])])):p("",!0),(te=(ee=s.task)==null?void 0:ee.dueDate)!=null&&te.dueDate?(d(),l("div",pu,[mu,o("div",gu,[f(o("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=k=>s.task.dueDate.isComplete=k),onChange:e[10]||(e[10]=(...k)=>s.updateTask&&s.updateTask(...k))},null,544),[[le,s.task.dueDate.isComplete]]),o("button",bu,[L(b(s.dueDate)+" ",1),s.task.dueDate.isComplete?(d(),l("span",_u,"complete")):p("",!0)])])])):p("",!0)]),o("div",ku,[o("div",vu,[fu,yu,!s.task.description&&!n.isEditingDesc?(d(),l("div",{key:0,class:"placeholder-desc",onClick:e[11]||(e[11]=v(k=>n.isEditingDesc=!0,["stop"]))},"Add a more detailed description...")):p("",!0),n.isEditingDesc?(d(),l("div",Cu,[f(o("textarea",{autofocus:"",placeholder:"Add a more detailed description...",class:"desc-edit-txt","onUpdate:modelValue":e[13]||(e[13]=k=>s.task.description=k)},null,512),[[D,s.task.description]]),o("div",wu,[o("button",{onClick:e[14]||(e[14]=v(k=>{n.isEditingDesc=!1,s.setDescTxt()},["stop"]))},"Save"),o("span",{class:"desc-close-icon",onClick:e[15]||(e[15]=v(k=>{n.isEditingDesc=!1,s.task.description=n.currDescTxt},["stop"]))})])])):(d(),l("pre",{key:1,onClick:e[12]||(e[12]=v(k=>n.isEditingDesc=!n.isEditingDesc,["stop"]))},b(s.task.description),1))]),!n.isEditingDesc&&s.task.description?(d(),l("button",{key:0,class:"edit-btn",onClick:e[16]||(e[16]=v(k=>n.isEditingDesc=!0,["stop"]))},"Edit")):p("",!0)]),(se=s.task.attachments)!=null&&se.length?(d(),S(c,{key:0,attachments:s.task.attachments,coverPhoto:n.coverPhoto,onDeleteAttachment:s.onDeleteAttachment,onSetPhoto:s.onSetPhoto},null,8,["attachments","coverPhoto","onDeleteAttachment","onSetPhoto"])):p("",!0),C(u,{checklists:s.task.checklists,onChecklistsUpdate:s.updateTask,onConvertTodo:s.convertToCard},null,8,["checklists","onChecklistsUpdate","onConvertTodo"]),C(_,{onAddComment:s.addComment,onDeleteComment:s.deleteComment,onSaveComment:s.saveComment,comments:s.task.comments,members:s.taskMembers,user:s.currUser},null,8,["onAddComment","onDeleteComment","onSaveComment","comments","members","user"])]),o("div",Au,[xu,f((d(),S(ne(n.currAction),{task:s.task,onCloseAction:s.closeAction,onLabelAdd:s.onAddLabel,onLabelSet:s.onSetLabel,onLabelDelete:s.onDeleteLabel,onColorSet:s.onSetColor,onPhotoSet:s.onSetPhoto,onCoverSizeSet:s.onSetCoverSize,onAttachFile:s.onAttachFile,onDateSet:s.setDate,onRemoveDate:s.removeDate,onChecklistTitleSet:s.setChecklistTitle,onAddMember:s.addMemberToTask,members:s.boardMembers,taskMembers:s.task.memberIds,labels:s.labels,attachments:s.task.attachments},null,8,["task","onCloseAction","onLabelAdd","onLabelSet","onLabelDelete","onColorSet","onPhotoSet","onCoverSizeSet","onAttachFile","onDateSet","onRemoveDate","onChecklistTitleSet","onAddMember","members","taskMembers","labels","attachments"])),[[m,s.closeAction]]),o("button",{onClick:e[17]||(e[17]=k=>s.setCurrAction("membersMenu"))},$u),o("button",{onClick:e[18]||(e[18]=v(k=>s.setCurrAction("labelMenu"),["stop"]))},Su),o("button",{onClick:e[19]||(e[19]=v(k=>s.setCurrAction("checklistMenu"),["stop"]))},Pu),o("button",{onClick:e[20]||(e[20]=v(k=>s.setCurrAction("datesMenu"),["stop"]))},Uu),o("button",{onClick:e[21]||(e[21]=v(k=>s.setCurrAction("attachmentMenu"),["stop"]))},Nu),!s.task.style.color&&!s.task.style.photo?(d(),l("button",{key:0,onClick:e[22]||(e[22]=v(k=>s.setCurrAction("coverMenu"),["stop"]))},Ju)):p("",!0),ju,o("button",{onClick:e[23]||(e[23]=v(k=>n.isArchiving=!n.isArchiving,["stop"]))},Vu),n.isArchiving?(d(),l("div",{key:1,class:"archive-btns",onClick:e[25]||(e[25]=v((...k)=>s.archive&&s.archive(...k),["stop"]))},[o("button",{onClick:e[24]||(e[24]=v((...k)=>s.archive&&s.archive(...k),["stop"]))},Yu)])):p("",!0)])])])):p("",!0)])),[[m,s.closeTaskDetails]])])}var Wu=y(Vc,[["render",Ku]]),Zu="/assets/tablero-left.0944c5c6.svg",eh="/assets/tablero-right.fb7895e9.svg";const th={components:{},created(){},data(){return{isSignUpPageOpen:!1,user:{email:"",password:""}}},methods:{log(t){console.log(t)},toggleLoginPage(){this.isSignUpPageOpen=!this.isSignUpPageOpen,this.$refs.mailInput.focus(),this.isSignUpPageOpen?this.user={email:"",username:"",password:""}:this.user={email:"",password:""}},async login(){try{if(!this.testMail(this.user.email)||!this.user.password){this.$refs.mailInput.focus();return}else await this.$store.dispatch({type:"login",user:this.user})}catch(t){throw t}},async signup(){try{if(!this.testMail(this.user.email)||!this.user.password||!this.user.username){this.$refs.mailInput.focus();return}else await this.$store.dispatch({type:"signup",user:this.user})}catch(t){throw t}},testMail(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}},computed:{checkPage(){return this.isSignUpPageOpen?"display : none":""},checkTypingSignUp(){return(this.user.email||this.user.password)&&this.isSignUpPageOpen?"display : none":""},isValidMail(){return this.user.email.includes("@")?"login-submit":"unvalid-mail"}},unmounted(){}},sh={class:"login-page"},oh=o("div",{class:"logo-container"},[o("img",{src:ge,class:"logo-icon"}),o("span",{class:"logo-text"},"ablero")],-1),rh={class:"login-content-container"},nh={class:"content-wrapper"},ah={class:"login-content"},ih={class:"login-password-container"},dh={class:"email-password"},lh={class:"inputs-container"},ch=o("div",{class:"login-methods-seperator"},"OR",-1),uh={class:"login-methods"},hh={class:"method-btn"},ph=o("span",{class:"google-icon"},null,-1),mh=o("div",{class:"method-btn"},[o("span",{class:"facebook-icon"}),o("span",{class:"text"},"Continue with Facebook")],-1),gh=o("hr",null,null,-1),bh={class:"bottom-link"},_h={class:"sign-up-link"},kh=Y('<div class="background"><div class="left-img"><img src="'+Zu+'" alt class="left"></div><div class="right-img"><img src="'+eh+'" alt class="right"></div></div>',1);function vh(t,e,r,a,n,s){return d(),l("section",sh,[oh,o("section",rh,[o("div",nh,[o("div",ah,[this.isSignUpPageOpen?(d(),l("h1",{key:1,class:"header",onClick:e[1]||(e[1]=(...i)=>s.toggleLoginPage&&s.toggleLoginPage(...i))},"Sign up for your acount")):(d(),l("h1",{key:0,class:"header",onClick:e[0]||(e[0]=(...i)=>s.toggleLoginPage&&s.toggleLoginPage(...i))},"Login to Tablero")),o("div",ih,[o("div",dh,[o("div",lh,[this.isSignUpPageOpen?f((d(),l("input",{key:0,type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>n.user.username=i),class:"login-input",placeholder:"Enter username"},null,512)),[[D,n.user.username]]):p("",!0),f(o("input",{type:"email",class:"login-input",placeholder:"Enter email ","onUpdate:modelValue":e[3]||(e[3]=i=>n.user.email=i),ref:"mailInput",autofocus:""},null,512),[[D,n.user.email]]),f(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>n.user.password=i),class:"login-input",placeholder:"Enter password"},null,512),[[D,n.user.password]])]),this.isSignUpPageOpen?(d(),l("input",{key:1,type:"submit",value:"Sign Up",class:$(s.isValidMail),onClick:e[6]||(e[6]=(...i)=>s.signup&&s.signup(...i))},null,2)):(d(),l("input",{key:0,type:"submit",class:"login-submit",value:"Log in",onClick:e[5]||(e[5]=(...i)=>s.login&&s.login(...i))}))]),o("div",{style:h(s.checkTypingSignUp),class:"login-methods-container"},[ch,o("div",uh,[o("div",hh,[ph,o("span",{onClick:e[7]||(e[7]=(...i)=>s.log&&s.log(...i)),class:"text"},"Continue with Google")]),mh])],4)]),gh,o("ul",bh,[o("li",_h,[this.isSignUpPageOpen?(d(),l("div",{key:1,to:"/login/",class:"sign-up",onClick:e[9]||(e[9]=(...i)=>s.toggleLoginPage&&s.toggleLoginPage(...i))},"Already have an acount? Log in")):(d(),l("div",{key:0,class:"sign-up",onClick:e[8]||(e[8]=(...i)=>s.toggleLoginPage&&s.toggleLoginPage(...i))},"Sign up for an acount"))])])])])]),kh])}var fh=y(th,[["render",vh]]);const ye=$e({history:De("/"),routes:[{path:"/",name:"home",component:Ao},{path:"/board",name:"boards",component:Mr},{path:"/login",name:"login",component:fh},{path:"/board/:boardId",name:"board",component:Rd,children:[{path:"card/:cardId",component:Wu}]}]}),yh={state:{boards:[],currBoardId:null,currTask:null,boardBgc:null,isLabelTitleShown:!1,isStartAnimation:!1,labelSize:{height:"8px",width:"40px"}},getters:{boards(t){if(!!t.boards.length)return JSON.parse(JSON.stringify(t.boards))},starredBoards(t){if(!!t.boards){var e=t.boards.filter(r=>r.isStarred);return e}},currBoard(t){if(!t.currBoardId||!t.boards.length)return;const e=t.boards.find(r=>r._id===t.currBoardId);return JSON.parse(JSON.stringify(e))},boardMembers(t){return t.boards.find(r=>r._id===t.currBoardId).members},currTask(t){if(!!t.currTask)return JSON.parse(JSON.stringify(t.currTask))},boardLabels(t){if(!t.currBoardId||!t.boards.length)return;const e=t.boards.find(r=>r._id===t.currBoardId);if(!(!e.labels||!e.labels.length))return JSON.parse(JSON.stringify(e.labels))},boardBgc(t){return t.boardBgc},isLabelTitleShown(t){return t.isLabelTitleShown},isStartAnimation(t){return t.isStartAnimation},labelSize(t){return t.labelSize}},mutations:{loadBoards(t,{boards:e}){t.boards=e},setCurrBoardId(t,{boardId:e}){t.currBoardId=e},saveBoard(t,{board:e}){const r=t.boards.findIndex(a=>a._id===e._id);t.boards.splice(r,1,e)},addGroup(t,{savedGroup:e}){const r=t.boards.findIndex(a=>a._id===t.currBoardId);t.boards[r].groups.push(e)},setCurrTask(t,{task:e,boardIdx:r,groupIdx:a,taskIdx:n}){t.currTask=e,t.boards[r].groups[a].tasks[n]=e},addTask(t,{task:e,groupId:r}){const a=t.boards.findIndex(s=>s._id===t.currBoardId);t.boards[a].groups.find(s=>s._id===r).tasks.push(e)},editGroup(t,{savedGroup:e,boardId:r}){const a=t.boards.findIndex(s=>s._id===r),n=t.boards[a].groups.findIndex(s=>s._id===e._id);t.boards[a].groups[n]=e},updateBoard(t,{board:e}){const r=t.boards.findIndex(a=>a._id===e._id);t.boards[r]=e},addBoard(t,{savedBoard:e}){console.log(e),t.boards.unshift(e)},changeHeaderBgc(t,{bgc:e,isLight:r}){t.boardBgc={bgc:e,isLight:r}},starBoard(t,{boardId:e}){const r=t.boards.find(a=>a._id===e);r.isStarred=!r.isStarred},deleteGroup(t,{groupId:e,boardId:r}){const a=t.boards.findIndex(s=>s._id===r),n=t.boards[a].groups.findIndex(s=>s._id===e);t.boards[a].groups.splice(n,1)},toggleLabel(t){t.isLabelTitleShown=!t.isLabelTitleShown},toggleLabelText(t){t.isStartAnimation=!t.isStartAnimation,t.isStartAnimation?t.labelSize={width:"55px",height:"16px"}:t.labelSize={width:"40px",height:"8px"}},deleteTask(t,{taskId:e,groupId:r,boardId:a}){const n=t.boards.findIndex(c=>c._id===a),s=t.boards[n].groups.findIndex(c=>c._id===r),i=t.boards[n].groups[s].tasks.findIndex(c=>c._id===e);t.boards[n].groups[s].tasks.splice(i,1),t.currTask=null},addCheckedUsers(t,{users:e}){const r=t.boards.findIndex(a=>a._id===t.currBoardId);e.forEach(a=>{t.boards[r].members.some(n=>n._id===a._id)||t.boards[r].members.push(a)})},removeUserFromBoard(t,{memberId:e}){const r=t.boards.findIndex(n=>n._id===t.currBoardId),a=t.boards[r].members.findIndex(n=>n._id===e);t.boards[r].members.splice(a,1)}},actions:{async loadBoards({commit:t,state:e}){try{const r=await x.query();t({type:"loadBoards",boards:r})}catch(r){throw r}},async saveBoard({commit:t},{board:e}){t({type:"saveBoard",board:e});try{await x.updateBoard(e)}catch(r){throw r}},async addGroup({commit:t},{boardId:e,groupToAdd:r}){try{const a=await x.saveGroup(e,r);t({type:"addGroup",savedGroup:a})}catch(a){throw a}},async addBoard({commit:t},{boardToAdd:e}){try{const r=await x.addBoard(e.title,e.style);t({type:"addBoard",savedBoard:r})}catch(r){throw r}},async starBoard({commit:t,state:e},{boardId:r}){try{const a=G({},e.boards.find(n=>n._id===r));a.isStarred=!a.isStarred,await x.updateBoard(a),t({type:"starBoard",boardId:r})}catch(a){throw a}},async getTask({commit:t},{taskId:e,boardId:r}){try{const a=await x.getTask(e,r);t({type:"setCurrTask",task:a})}catch{}},async saveTask({commit:t,state:e},{task:r,boardId:a}){const n=e.boards.find(m=>m._id===a),s=e.boards.findIndex(m=>m._id===a),i=await x.getGroupIdByTaskId(r._id,a),c=n.groups.find(m=>m._id===i),u=n.groups.findIndex(m=>m._id===i),_=c.tasks.findIndex(m=>m._id===r._id);t({type:"setCurrTask",task:r,boardIdx:s,groupIdx:u,taskIdx:_}),x.saveTask(r,a)},async addTask({commit:t},{task:e,boardId:r}){console.log("from store",e,r);const a=await x.saveTask(e,r);t({type:"addTask",task:a,groupId:e.groupId})},async editGroup({commit:t},{groupToEdit:e,boardId:r}){t({type:"editGroup",savedGroup:e,boardId:r});try{const a=await x.saveGroup(r,e)}catch(a){throw a}},async changeBoardBgc({commit:t},{bgc:e,boardId:r}){const a=JSON.parse(JSON.stringify(await x.getBoardById(r)));delete a.style.backgroundColor,delete a.style.photo,a.style.backgroundColor=e,await x.updateBoard(a),t({type:"updateBoard",board:a})},async changeBoardBgp({commit:t},{url:e,boardId:r}){const a=JSON.parse(JSON.stringify(await x.getBoardById(r)));delete a.style.backgroundColor,delete a.style.photo,a.style.photo=e,await x.updateBoard(a),t({type:"updateBoard",board:a})},async addLabel({commit:t},{label:e,boardId:r}){const a=await x.getBoardById(r);if(e._id){const n=a.labels.findIndex(s=>s._id===e._id);a.labels.splice(n,1,e)}else{e._id=O.makeId();const n=a.labels.findIndex(s=>s.color===e.color);a.labels.splice(n,0,e)}t({type:"saveBoard",board:a}),await x.updateBoard(a)},async deleteLabel({commit:t},{labelId:e,task:r,boardId:a}){try{if(r.labelIds.includes(e)){const i=r.labelIds.findIndex(c=>c===e);r.labelIds.splice(i,1),await x.saveTask(r,a)}const n=await x.getBoardById(a),s=n.labels.findIndex(i=>i._id===e);n.labels.splice(s,1),t({type:"saveBoard",board:n}),await x.updateBoard(n)}catch(n){throw n}},async deleteGroup({commit:t},{groupId:e,boardId:r}){try{t({type:"deleteGroup",groupId:e,boardId:r}),x.removeGroup(r,e)}catch(a){throw a}},toggleLabelTitle({commit:t}){t({type:"toggleLabel"}),setTimeout(()=>{t({type:"toggleLabelText"})},100)},async deleteTask({commit:t},{taskId:e,boardId:r}){try{const a=await x.getGroupIdByTaskId(e,r);t({type:"deleteTask",taskId:e,groupId:a,boardId:r}),await x.removeTask(e,r)}catch(a){throw a}},async attachFile({state:t,dispatch:e},{file:r,task:a}){(!a.attachments||!a.attachments.length)&&(a.attachments=[]);const n=await H.uploadPhoto(r);a.attachments.push(n),e({type:"saveTask",task:a,boardId:t.currBoardId})},async deleteAttachment({state:t,dispatch:e},{id:r,task:a}){const n=a.attachments.findIndex(s=>s.asset_id===r);a.attachments.splice(n,1),e({type:"saveTask",task:a,boardId:t.currBoardId})},async setDate({state:t,dispatch:e},{task:r,dueDate:a}){r.dueDate=G({},a),e({type:"saveTask",task:r,boardId:t.currBoardId})},async saveChecklist({state:t,dispatch:e},{title:r,task:a}){a.checklists||(a.checklists=[]),a.checklists.push({title:r,_id:O.makeId(),todos:[]}),e({type:"saveTask",task:a,boardId:t.currBoardId})},async addCheckedUsers({state:t,commit:e},{users:r}){await x.addMembersToBoard(r,t.currBoardId),e({type:"addCheckedUsers",users:r})},async convertTodoToTask({dispatch:t,state:e},{txt:r,currTask:a}){const s={groupId:await x.getGroupIdByTaskId(a._id,e.currBoardId),title:r};t({type:"addTask",task:s,boardId:e.currBoardId})},async removeUserFromBoard({commit:t},{memberId:e,boardId:r}){await x.removeUserFromBoard(e,r),t({type:"removeUserFromBoard",memberId:e})},async addComment({dispatch:t,state:e},{comment:r,task:a}){r._id=O.makeId(),a.comments.push(r),t({type:"saveTask",task:a,boardId:e.currBoardId})},async deleteComment({dispatch:t,state:e},{commentId:r,task:a}){const n=a.comments.findIndex(s=>s._id===r);a.comments.splice(n,1),t({type:"saveTask",task:a,boardId:e.currBoardId})},async saveComment({dispatch:t,state:e},{txt:r,commentId:a,task:n}){const s=n.comments.findIndex(i=>i._id===a);n.comments[s].txt=r,t({type:"saveTask",task:n,boardId:e.currBoardId})}}},Ch={state:{loggedinUser:null,searchedUsers:null},getters:{loggedinUser(t){return t.loggedinUser},searchedUsers(t){return t.searchedUsers}},mutations:{login(t,{user:e}){t.loggedinUser=e},logout(t){t.loggedinUser=null},updateSearchedUsers(t,{users:e}){t.searchedUsers=e}},actions:{async getLoggedinUser({commit:t}){try{const e=await F.getLoggedinUser();t({type:"login",user:e})}catch(e){throw e}},async login({commit:t},{user:e}){try{const r=await F.login(e);t({type:"login",user:r})}catch(r){throw r}},async signup({commit:t},{user:e}){try{const r=await F.signup(e);t({type:"login",user:r})}catch(r){throw r}},async logout({commit:t}){try{await F.logout(),t({type:"logout"})}catch(e){throw e}},async searchForUsers({commit:t},{searchInput:e}){const r=await F.getUsers(e);t({type:"updateSearchedUsers",users:r})}}},wh=Ie({strict:!0,state:{},getters:{},mutations:{},modules:{boardStore:yh,userStore:Ch}});function Ah(t,e){var r=null;return function(){clearTimeout(r);var a=arguments,n=this;r=setTimeout(function(){t.apply(n,a)},e)}}function xh(t,e){e.value!==e.oldValue&&(t.oninput=Ah(function(){t.dispatchEvent(new Event("change"))},parseInt(e.value)||500))}const R=Se(to);R.directive("clickoutside",{mounted:(t,e)=>{setTimeout(()=>{t.clickOutsideEvent=function(r){t==r.target||t.contains(r.target)||e.value(r,t)},document.body.addEventListener("click",t.clickOutsideEvent),document.body.addEventListener("touchstart",t.clickOutsideEvent)},100)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent),document.body.removeEventListener("touchstart",t.clickOutsideEvent)},stopProp(t){t.stopPropagation()}});R.use(Me);R.directive("debounce",(t,e)=>xh(t,e));R.use(wh);R.use(ye);R.mount("#app");
